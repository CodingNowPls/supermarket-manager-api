(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d077c86"],{"0543":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"e",(function(){return n})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return i}));var r=a("b775"),l="/sale/saleRecord";function o(){return Object(r["a"])({url:l+"/getCn",method:"get"})}function s(){return Object(r["a"])({url:l+"/getOptionSaleRecordsGoods",method:"get"})}function n(e){return Object(r["a"])({url:l+"/saveSaleRecords",method:"post",data:e})}function c(e){return Object(r["a"])({url:l+"/queryPageByQoSaleRecords",method:"post",data:e})}function i(e){return Object(r["a"])({url:l+"/delSaleRecords",method:"get",params:e})}},"5f87":function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"d",(function(){return n})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return i}));a("b64b");var r=a("852e"),l=a.n(r),o="token";function s(){return l.a.get(o)}function n(){return l.a.remove(o)}function c(){var e=l.a.get("employee");return JSON.parse(e)}function i(e){l.a.remove(e)}},6095:function(e,t,a){},6682:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"sale_records"}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("销售管理")]),a("el-breadcrumb-item",[e._v("销售记录")])],1),a("br"),a("el-row",[a("el-col",{attrs:{span:4}},[a("el-input",{staticStyle:{height:"21px",width:"130px"},attrs:{placeholder:"销售编号"},model:{value:e.searchForm.cn,callback:function(t){e.$set(e.searchForm,"cn",t)},expression:"searchForm.cn"}})],1),a("el-col",{attrs:{span:10}},[a("span",[e._v("销售时间：")]),a("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"起始时间"},model:{value:e.searchForm.startSellTime,callback:function(t){e.$set(e.searchForm,"startSellTime",t)},expression:"searchForm.startSellTime"}}),e._v(" - "),a("el-date-picker",{staticStyle:{width:"140px"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"结束时间"},model:{value:e.searchForm.endSellTime,callback:function(t){e.$set(e.searchForm,"endSellTime",t)},expression:"searchForm.endSellTime"}})],1),a("el-col",{attrs:{span:4}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"顾客类型",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},[a("el-option",{attrs:{label:"非会员顾客",value:"0"}}),a("el-option",{attrs:{label:"会员",value:"1"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"支付方式",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.searchForm.sellway,callback:function(t){e.$set(e.searchForm,"sellway",t)},expression:"searchForm.sellway"}},[a("el-option",{attrs:{label:"支付宝",value:"0"}}),a("el-option",{attrs:{label:"微信",value:"1"}}),a("el-option",{attrs:{label:"现金",value:"2"}}),a("el-option",{attrs:{label:"银行卡",value:"3"}})],1)],1)],1),a("br"),a("el-row",[a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:24}},[a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"success"},on:{click:e.submitSearchForm}},[a("i",{staticClass:"iconfont icon-r-find",staticStyle:{"font-size":"18px"}}),e._v(" 搜索 ")])],1)],1),a("br"),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"medium"}},[a("el-table-column",{attrs:{prop:"cn",width:"200",label:"编号"}}),a("el-table-column",{attrs:{prop:"sellTotal",label:"销售数量"}}),a("el-table-column",{attrs:{prop:"sellTotalmoney",label:"销售总额"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(parseFloat(t.row.sellTotalmoney).toFixed(2))+" ")]}}])}),a("el-table-column",{attrs:{prop:"sellTime","show-overflow-tooltip":!0,label:"销售时间"}}),a("el-table-column",{attrs:{prop:"type",label:"顾客类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.type?a("el-tag",{staticStyle:{"font-size":"14px"},attrs:{effect:"dark",type:"warning"}},[a("i",{staticClass:"iconfont icon-r-mark1"}),e._v(" 会员 ")]):a("el-tag",{attrs:{effect:"dark",type:"info"}},[e._v("非会员 ")])]}}])}),a("el-table-column",{attrs:{prop:"sellby",label:"销售员"}}),a("el-table-column",{attrs:{prop:"sellway",label:"支付方式"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.sellway?a("el-tag",{attrs:{effect:"dark",type:"primary"}},[e._v("支付宝 ")]):"1"==t.row.sellway?a("el-tag",{attrs:{effect:"dark",type:"success"}},[e._v("微信 ")]):"3"==t.row.sellway?a("el-tag",{attrs:{effect:"dark",type:"warning"}},[e._v("银行卡 ")]):a("el-tag",{attrs:{effect:"dark",type:"danger"}},[e._v("现金")])]}}])}),a("el-table-column",{attrs:{prop:"info","show-overflow-tooltip":!0,label:"备注"}}),a("el-table-column",{attrs:{width:"240",label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"success"},on:{click:function(a){return e.detailBtn(t.row)}}},[a("i",{staticClass:"iconfont icon-r-find",staticStyle:{"font-size":"18px"}}),e._v(" 明细 ")]),a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"danger"},on:{click:function(a){return e.del(t.row.cn)}}},[a("i",{staticClass:"iconfont icon-r-delete",staticStyle:{"font-size":"18px"}}),e._v(" 删除 ")])]}}])})],1),a("div",{staticStyle:{margin:"10px 0 15px 0"}},[a("el-pagination",{attrs:{"current-page":e.searchForm.currentPage,"page-sizes":[5,10,20,50],"page-size":e.searchForm.pageSize,layout:"total,sizes, prev, pager, next,jumper",total:e.searchForm.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.searchForm,"currentPage",t)},"update:current-page":function(t){return e.$set(e.searchForm,"currentPage",t)}}})],1)],1),a("el-dialog",{attrs:{title:"销售订单明细",visible:e.detailSaleRecordsVisable,width:"80%"},on:{"update:visible":function(t){e.detailSaleRecordsVisable=t}}},[a("el-form",{staticClass:"demo-ruleForm",attrs:{model:e.saleRecordForm,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"销售编号："}},[a("el-input",{attrs:{disabled:"",readonly:"",placeholder:"如：销售编号"},model:{value:e.saleRecordForm.cn,callback:function(t){e.$set(e.saleRecordForm,"cn",t)},expression:"saleRecordForm.cn"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"支付方式：",prop:"sellway"}},[a("el-radio",{attrs:{disabled:"",type:"radio",label:"0"},model:{value:e.saleRecordForm.sellway,callback:function(t){e.$set(e.saleRecordForm,"sellway",t)},expression:"saleRecordForm.sellway"}},[e._v("支付宝 ")]),a("el-radio",{attrs:{disabled:"",type:"radio",label:"1"},model:{value:e.saleRecordForm.sellway,callback:function(t){e.$set(e.saleRecordForm,"sellway",t)},expression:"saleRecordForm.sellway"}},[e._v("微信 ")]),a("el-radio",{attrs:{disabled:"",type:"radio",label:"2"},model:{value:e.saleRecordForm.sellway,callback:function(t){e.$set(e.saleRecordForm,"sellway",t)},expression:"saleRecordForm.sellway"}},[e._v("现金 ")]),a("el-radio",{attrs:{disabled:"",type:"radio",label:"3"},model:{value:e.saleRecordForm.sellway,callback:function(t){e.$set(e.saleRecordForm,"sellway",t)},expression:"saleRecordForm.sellway"}},[e._v("银行卡 ")])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"顾客类型："}},[a("el-radio",{attrs:{disabled:"",type:"radio",label:"1"},model:{value:e.saleRecordForm.type,callback:function(t){e.$set(e.saleRecordForm,"type",t)},expression:"saleRecordForm.type"}},[e._v("会员 ")]),a("el-radio",{attrs:{disabled:"",type:"radio",label:"0"},model:{value:e.saleRecordForm.type,callback:function(t){e.$set(e.saleRecordForm,"type",t)},expression:"saleRecordForm.type"}},[e._v("非会员 ")])],1)],1),"1"==e.saleRecordForm.type?a("el-col",{attrs:{span:12}},[a("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"会员账号：",prop:"memberPhone"}},[a("el-input",{attrs:{readonly:"",placeholder:"如：电话号码"},model:{value:e.saleRecordForm.memberPhone,callback:function(t){e.$set(e.saleRecordForm,"memberPhone",t)},expression:"saleRecordForm.memberPhone"}})],1)],1):e._e()],1),a("hr"),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.saleRecordForm.detailSaleRecords,size:"medium"}},[a("el-table-column",{attrs:{prop:"goodsId",label:"商品编号"}}),a("el-table-column",{attrs:{prop:"goodsName",label:"商品名"}}),a("el-table-column",{attrs:{prop:"goodsNum",label:"数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"info",disabled:""}},[e._v("-")]),a("el-input",{staticStyle:{width:"80px"},attrs:{disabled:"",type:"number",min:"1"},model:{value:t.row.goodsNum,callback:function(a){e.$set(t.row,"goodsNum",a)},expression:"scope.row.goodsNum"}}),a("el-button",{attrs:{type:"info",disabled:""}},[e._v("+")])]}}])}),a("el-table-column",{attrs:{prop:"goodsPrice",label:"商品单价（元）"}})],1)],1)],1),a("hr"),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"备注："}},[a("el-input",{attrs:{disabled:"",readonly:"",type:"textarea",placeholder:"如：订单1"},model:{value:e.saleRecordForm.info,callback:function(t){e.$set(e.saleRecordForm,"info",t)},expression:"saleRecordForm.info"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[e.saleRecordForm.detailSaleRecords>0?a("div",[e._v(" 订单号："+e._s(e.saleRecordForm.cn)+" 商品总数："+e._s(e.saleRecordForm.sellTotal?e.saleRecordForm.sellTotal:0)+" 消费："+e._s(e.saleRecordForm.sellTotalmoney?parseFloat(e.saleRecordForm.sellTotalmoney).toFixed(2):0)+"元 "),e.saleRecordForm.sellway?a("span",[e._v("支付方式："+e._s("0"==e.saleRecordForm.sellway?"支付宝":"1"==e.saleRecordForm.sellway?"微信":"2"==e.saleRecordForm.sellway?"现金":"银行卡")+" ")]):e._e(),a("br"),"1"==e.saleRecordForm.type?a("span",[e._v("会员享受9折 ")]):e._e(),e.saleRecordForm.sellTime?a("span",[e._v("消费时间："+e._s(e.saleRecordForm.sellTime)+" 操作者编号："+e._s(e.saleRecordForm.eid))]):e._e()]):e._e()])],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",[a("el-button",{attrs:{type:"info"},on:{click:function(t){e.detailSaleRecordsVisable=!1}}},[e._v("关闭 ")])],1)],1)],1)],1)],1)],1)},l=[],o=a("5530"),s=a("e2a7"),n=a("0543"),c={data:function(){return{detailSaleRecordsVisable:!1,searchForm:{pageSize:5},tableData:[],saleRecordForm:{cn:"",sellway:"",info:"",sellTotal:"",sellTotalmoney:"",type:"0",detailSaleRecords:[]}}},methods:{init:function(){var e=this;this.searchForm.startSellTime>this.searchForm.endSellTime?Object(s["a"])("结束时间不能小于开始时间","warning"):Object(n["d"])(this.searchForm).then((function(t){200===t.code&&(e.tableData=t.data.records,e.searchForm.total=t.data.total,e.searchForm.pageSize=t.data.size,e.searchForm.currentPage=t.data.current)}))},del:function(e){var t=this;this.$confirm("确定删除这条记录？","警示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["a"])({cn:e}).then((function(e){200===e.code&&(Object(s["a"])("操作成功"),t.init())}))})).catch((function(){t.$message({type:"info",message:"已取消操作"})}))},detailBtn:function(e){this.saleRecordForm={cn:"",sellway:"",info:"",sellTotal:"",sellTotalmoney:"",type:"0",detailSaleRecords:[]},this.saleRecordForm=Object(o["a"])({},e),this.detailSaleRecordsVisable=!0},handleSizeChange:function(e){this.searchForm.pageSize=e,this.init(),console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){this.searchForm.currentPage=e,this.init(),console.log("当前页: ".concat(e))},submitSearchForm:function(){this.init()}},mounted:function(){this.init()}},i=c,d=(a("8d22"),a("2877")),u=Object(d["a"])(i,r,l,!1,null,null,null);t["default"]=u.exports},"8d22":function(e,t,a){"use strict";a("6095")},b775:function(e,t,a){"use strict";a("c7eb"),a("1da1"),a("5530");var r=a("53ca"),l=(a("d9e2"),a("caad"),a("fb6a"),a("e9c4"),a("b64b"),a("d3b7"),a("2532"),a("bc3a")),o=a.n(l),s=a("5c96"),n=a("4360"),c=a("5f87"),i={401:"认证失败，无法访问系统资源",403:"当前操作没有权限",404:"访问资源不存在",default:"系统未知错误，请反馈给管理员"};a("b85c"),a("a15b"),a("14d9"),a("4d63"),a("c607"),a("ac1f"),a("2c3e"),a("00b4"),a("25f0"),a("5319"),a("1276");function d(e){for(var t="",a=0,l=Object.keys(e);a<l.length;a++){var o=l[a],s=e[o],n=encodeURIComponent(o)+"=";if(null!==s&&""!==s&&"undefined"!==typeof s)if("object"===Object(r["a"])(s))for(var c=0,i=Object.keys(s);c<i.length;c++){var d=i[c];if(null!==s[d]&&""!==s[d]&&"undefined"!==typeof s[d]){var u=o+"["+d+"]",m=encodeURIComponent(u)+"=";t+=m+encodeURIComponent(s[d])+"&"}}else t+=n+encodeURIComponent(s)+"&"}return t}var u={set:function(e,t){sessionStorage&&null!=e&&null!=t&&sessionStorage.setItem(e,t)},get:function(e){return sessionStorage?null==e?null:sessionStorage.getItem(e):null},setJSON:function(e,t){null!=t&&this.set(e,JSON.stringify(t))},getJSON:function(e){var t=this.get(e);if(null!=t)return JSON.parse(t)},remove:function(e){sessionStorage.removeItem(e)}},m={set:function(e,t){localStorage&&null!=e&&null!=t&&localStorage.setItem(e,t)},get:function(e){return localStorage?null==e?null:localStorage.getItem(e):null},setJSON:function(e,t){null!=t&&this.set(e,JSON.stringify(t))},getJSON:function(e){var t=this.get(e);if(null!=t)return JSON.parse(t)},remove:function(e){localStorage.removeItem(e)}},p={session:u,local:m},f=(a("21a6"),{show:!1});o.a.defaults.headers["Content-Type"]="application/json;charset=utf-8";var b=o.a.create({baseURL:"/",timeout:1e4});b.interceptors.request.use((function(e){var t=!1===(e.headers||{}).isToken,a=!1===(e.headers||{}).repeatSubmit;if(Object(c["b"])()&&!t&&(e.headers["token"]=Object(c["b"])()),"get"===e.method&&e.params){var l=e.url+"?"+d(e.params);l=l.slice(0,-1),e.params={},e.url=l}if(!a&&("post"===e.method||"put"===e.method)){var o={url:e.url,data:"object"===Object(r["a"])(e.data)?JSON.stringify(e.data):e.data,time:(new Date).getTime()},s=p.session.getJSON("sessionObj");if(void 0===s||null===s||""===s)p.session.setJSON("sessionObj",o);else{var n=s.url,i=s.data,u=s.time,m=1e3;if(i===o.data&&o.time-u<m&&n===o.url){var f="数据正在处理，请勿重复提交";return console.warn("[".concat(n,"]: ")+f),Promise.reject(new Error(f))}p.session.setJSON("sessionObj",o)}}return e}),(function(e){console.log(e),Promise.reject(e)})),b.interceptors.response.use((function(e){var t=e.data.code||200,a=e.data.msg,r=i[t]||i["default"];return"blob"===e.request.responseType||"arraybuffer"===e.request.responseType?e.data:401===t?(f.show||(f.show=!0,s["MessageBox"].confirm("登录状态已过期，您可以继续留在该页面，或者重新登录","系统提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){f.show=!1,n["a"].dispatch("LogOut").then((function(){location.href="/index"}))})).catch((function(){f.show=!1}))),Promise.reject("无效的会话，或者会话已过期，请重新登录。")):500===t?(Object(s["Message"])({message:r,type:"error"}),Promise.reject(new Error(r))):601===t?(Object(s["Message"])({message:r,type:"warning"}),Promise.reject("error")):200!==t?(s["Notification"].error({title:a}),Promise.reject("error")):e.data}),(function(e){console.log("err"+e);var t=e.message;return"Network Error"==t?t="后端接口连接异常":t.includes("timeout")?t="系统接口请求超时":t.includes("Request failed with status code")&&(t="系统接口"+t.substr(t.length-3)+"异常"),Object(s["Message"])({message:t,type:"error",duration:5e3}),Promise.reject(e)}));t["a"]=b},e2a7:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a("5c96");function l(e,t){switch(t){case"warning":r["Message"].warning(e);break;case"error":r["Message"].error({message:e,duration:5e3,showClose:!0});break;case"info":r["Message"].info(e);break;default:r["Message"].success(e)}}}}]);