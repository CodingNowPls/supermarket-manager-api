(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-229b1014"],{"1e4b":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{staticStyle:{height:"80px"}},[n("el-row",[n("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:12}},[n("i",{staticClass:"iconfont icon-r-building",staticStyle:{color:"white","font-size":"32px"}},[n("b",{staticStyle:{"font-size":"26px"}},[e._v(" 超市管理系统")])])]),n("el-col",{staticStyle:{"text-align":"right","margin-top":"15px",cursor:"pointer"},attrs:{span:12}},[n("el-dropdown",[n("el-avatar",{attrs:{size:50,shape:"square",src:e.BaseApi+e.circleUrl}}),n("b",{staticStyle:{"font-size":"24px",color:"white","margin-top":"-10px"}},[e._v(e._s(e.isAdmin?"管理员 ":"用户 ")+" "+e._s(e.loginName))]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(t){return e.informationBtn(t)}}},[e._v("个人资料完善")]),n("el-dropdown-item",{nativeOn:{click:function(t){return e.empExit(t)}}},[e._v("退出")])],1)],1)],1)],1)],1),n("el-dialog",{attrs:{title:"注销账户",visible:e.logoutVisable,width:"70%"},on:{"update:visible":function(t){e.logoutVisable=t}}},[n("el-form",{ref:"logoutform",staticClass:"demo-ruleForm",attrs:{model:e.logoutform,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"内容",prop:"content"}},[n("el-input",{attrs:{placeholder:"请填写“本人确定注销”"},model:{value:e.logoutform.content,callback:function(t){e.$set(e.logoutform,"content",t)},expression:"logoutform.content"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.logoutSubmit("logoutform")}}},[e._v("确 定 ")]),n("el-button",{on:{click:function(t){return e.logoutCel("logoutform")}}},[e._v("取 消 ")])],1)],1)],1),n("el-container",[n("el-aside",{staticStyle:{"overflow-y":"hidden","min-height":"900px"},attrs:{width:"200px"}},[n("el-menu",{attrs:{"background-color":"#000000","text-color":"white",router:!0,"unique-opened":!0,"active-text-color":"#FFDEAD"}},e._l(e.menu_catalogs,(function(t){return n("el-submenu",{key:t.id,attrs:{index:t.id+""}},[n("template",{slot:"title"},[n("i",{class:t.icon,staticStyle:{"font-size":"26px",color:"white"}},[n("b",{staticStyle:{"font-size":"18px"}},[e._v(" "+e._s(t.label))])])]),n("el-menu-item-group",e._l(t.children,(function(t){return n("el-menu-item",{key:t.id,attrs:{index:t.purl}},[n("i",{class:t.icon,staticStyle:{"font-size":"24px"}}),n("b",{staticStyle:{"font-size":"16px"}},[e._v(" "+e._s(t.label))])])})),1)],2)})),1)],1),n("el-main",[n("router-view")],1)],1)],1)},r=[],i=(n("14d9"),n("e2a7")),s=n("b775");function a(){return Object(s["a"])({url:"/empMenu",method:"get"})}function c(e){return Object(s["a"])({url:"/exit",method:"get",params:e})}var u=n("d160"),l=n("5f87"),f={data:function(){return{BaseApi:this.$store.state.BaseApi,logoutVisable:!1,loginName:"",isAdmin:"",logoutform:{},circleUrl:Object(l["c"])().headImg,menu_catalogs:[],rules:{content:[{required:!0,message:"内容不能为空",trigger:"blur"}]}}},methods:{init:function(){var e=this;this.isAdmin=Object(l["c"])().isAdmin,this.loginName=Object(l["c"])().nickName,a("/empMenu").then((function(t){200===t.code&&(e.menu_catalogs=t.data)}))},informationBtn:function(){this.$router.push("/person/information"),Object(i["a"])("请完善个人的资料")},empExit:function(){var e=this;this.$confirm("确定要退出系统?","警示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){c(e.pwdForm).then((function(t){200===t.code&&(Object(l["a"])("employee"),Object(l["a"])("token"),e.$router.push("/"))}))})).catch((function(){e.$message({type:"info",message:"已取消操作"})}))},logoutCel:function(e){this.$refs[e].resetFields(),this.logoutform={},this.logoutVisable=!1},logoutSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e&&Object(u["b"])({content:t.logoutform.content}).then((function(e){200===e.code&&(Object(i["a"])("注销成功"),Object(l["a"])("employee"),Object(l["a"])("token"),t.logoutVisable=!1,t.$router.push("/"))}))}))}},mounted:function(){this.init()}},d=f,m=(n("d93f"),n("2877")),p=Object(m["a"])(d,o,r,!1,null,null,null);t["default"]=p.exports},"5f87":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u}));n("b64b");var o=n("852e"),r=n.n(o),i="token";function s(){return r.a.get(i)}function a(){return r.a.remove(i)}function c(){var e=r.a.get("employee");return JSON.parse(e)}function u(e){r.a.remove(e)}},b775:function(e,t,n){"use strict";n("c7eb"),n("1da1"),n("5530");var o=n("53ca"),r=(n("d9e2"),n("caad"),n("fb6a"),n("e9c4"),n("b64b"),n("d3b7"),n("2532"),n("bc3a")),i=n.n(r),s=n("5c96"),a=n("4360"),c=n("5f87"),u={401:"认证失败，无法访问系统资源",403:"当前操作没有权限",404:"访问资源不存在",default:"系统未知错误，请反馈给管理员"};n("b85c"),n("a15b"),n("14d9"),n("4d63"),n("c607"),n("ac1f"),n("2c3e"),n("00b4"),n("25f0"),n("5319"),n("1276");function l(e){for(var t="",n=0,r=Object.keys(e);n<r.length;n++){var i=r[n],s=e[i],a=encodeURIComponent(i)+"=";if(null!==s&&""!==s&&"undefined"!==typeof s)if("object"===Object(o["a"])(s))for(var c=0,u=Object.keys(s);c<u.length;c++){var l=u[c];if(null!==s[l]&&""!==s[l]&&"undefined"!==typeof s[l]){var f=i+"["+l+"]",d=encodeURIComponent(f)+"=";t+=d+encodeURIComponent(s[l])+"&"}}else t+=a+encodeURIComponent(s)+"&"}return t}var f={set:function(e,t){sessionStorage&&null!=e&&null!=t&&sessionStorage.setItem(e,t)},get:function(e){return sessionStorage?null==e?null:sessionStorage.getItem(e):null},setJSON:function(e,t){null!=t&&this.set(e,JSON.stringify(t))},getJSON:function(e){var t=this.get(e);if(null!=t)return JSON.parse(t)},remove:function(e){sessionStorage.removeItem(e)}},d={set:function(e,t){localStorage&&null!=e&&null!=t&&localStorage.setItem(e,t)},get:function(e){return localStorage?null==e?null:localStorage.getItem(e):null},setJSON:function(e,t){null!=t&&this.set(e,JSON.stringify(t))},getJSON:function(e){var t=this.get(e);if(null!=t)return JSON.parse(t)},remove:function(e){localStorage.removeItem(e)}},m={session:f,local:d},p=(n("21a6"),{show:!1});i.a.defaults.headers["Content-Type"]="application/json;charset=utf-8";var g=i.a.create({baseURL:"/",timeout:1e4});g.interceptors.request.use((function(e){var t=!1===(e.headers||{}).isToken,n=!1===(e.headers||{}).repeatSubmit;if(Object(c["b"])()&&!t&&(e.headers["token"]=Object(c["b"])()),"get"===e.method&&e.params){var r=e.url+"?"+l(e.params);r=r.slice(0,-1),e.params={},e.url=r}if(!n&&("post"===e.method||"put"===e.method)){var i={url:e.url,data:"object"===Object(o["a"])(e.data)?JSON.stringify(e.data):e.data,time:(new Date).getTime()},s=m.session.getJSON("sessionObj");if(void 0===s||null===s||""===s)m.session.setJSON("sessionObj",i);else{var a=s.url,u=s.data,f=s.time,d=1e3;if(u===i.data&&i.time-f<d&&a===i.url){var p="数据正在处理，请勿重复提交";return console.warn("[".concat(a,"]: ")+p),Promise.reject(new Error(p))}m.session.setJSON("sessionObj",i)}}return e}),(function(e){console.log(e),Promise.reject(e)})),g.interceptors.response.use((function(e){var t=e.data.code||200,n=e.data.msg,o=u[t]||u["default"];return"blob"===e.request.responseType||"arraybuffer"===e.request.responseType?e.data:401===t?(p.show||(p.show=!0,s["MessageBox"].confirm("登录状态已过期，您可以继续留在该页面，或者重新登录","系统提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){p.show=!1,a["a"].dispatch("LogOut").then((function(){location.href="/index"}))})).catch((function(){p.show=!1}))),Promise.reject("无效的会话，或者会话已过期，请重新登录。")):500===t?(Object(s["Message"])({message:o,type:"error"}),Promise.reject(new Error(o))):601===t?(Object(s["Message"])({message:o,type:"warning"}),Promise.reject("error")):200!==t?(s["Notification"].error({title:n}),Promise.reject("error")):e.data}),(function(e){console.log("err"+e);var t=e.message;return"Network Error"==t?t="后端接口连接异常":t.includes("timeout")?t="系统接口请求超时":t.includes("Request failed with status code")&&(t="系统接口"+t.substr(t.length-3)+"异常"),Object(s["Message"])({message:t,type:"error",duration:5e3}),Promise.reject(e)}));t["a"]=g},d160:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));n("d3b7"),n("3ca3"),n("ddb0"),n("9861");var o=n("b775");n("24e5");function r(e){return Object(o["a"])({url:"/login",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:new URLSearchParams({username:e.username,password:e.password})})}function i(e){return Object(o["a"])({url:"/logout",method:"post",data:e})}},d93f:function(e,t,n){"use strict";n("db6f")},db6f:function(e,t,n){},e2a7:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("5c96");function r(e,t){switch(t){case"warning":o["Message"].warning(e);break;case"error":o["Message"].error({message:e,duration:5e3,showClose:!0});break;case"info":o["Message"].info(e);break;default:o["Message"].success(e)}}}}]);