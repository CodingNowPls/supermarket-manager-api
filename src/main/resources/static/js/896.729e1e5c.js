"use strict";(self["webpackChunksupermarket_manager"]=self["webpackChunksupermarket_manager"]||[]).push([[896],{6896:function(e,t,r){r.r(t),r.d(t,{default:function(){return h}});var a=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",[e._v("首页")]),t("el-breadcrumb-item",[e._v("库存管理")]),t("el-breadcrumb-item",[e._v("库存统计")])],1),t("br"),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{placeholder:"仓库名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),t("el-col",{attrs:{span:16}},[t("i",{staticClass:"iconfont icon-r-add",staticStyle:{"font-size":"28px"}},[t("b",[e._v(" 总存储量："),t("span",{staticStyle:{color:"#fc4316"}},[e._v(e._s(e.totalStoreNum?e.totalStoreNum:0)+"件")])])])])],1),t("br"),t("el-row",[t("el-col",{staticStyle:{"text-align":"left"},attrs:{span:24}},[t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:e.submitSearchForm}},[t("i",{staticClass:"iconfont icon-r-find",staticStyle:{"font-size":"18px"}}),e._v(" 搜索 ")])],1)],1),t("br"),t("div",{staticClass:"table"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"medium"}},[t("el-table-column",{attrs:{type:"index",width:"200",label:"序号"}}),t("el-table-column",{attrs:{prop:"storeName","show-overflow-tooltip":!0,label:"仓库名"}}),t("el-table-column",{attrs:{prop:"residueNum","show-overflow-tooltip":!0,label:"存货数量"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:function(t){return e.detailStoreBtn(r.row)}}},[t("i",{staticClass:"iconfont icon-r-find",staticStyle:{"font-size":"18px"}}),e._v(" 存储明细 ")])]}}])})],1),t("div",{staticStyle:{margin:"10px 0 15px 0"}},[t("el-pagination",{attrs:{"current-page":e.searchForm.currentPage,"page-sizes":[5,10,20,50],"page-size":e.searchForm.pageSize,layout:"total,sizes, prev, pager, next,jumper",total:e.searchForm.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.searchForm,"currentPage",t)},"update:current-page":function(t){return e.$set(e.searchForm,"currentPage",t)}}})],1)],1),t("el-dialog",{attrs:{title:"仓库存储明细",visible:e.detailStoreVisible,width:"95%",height:"100%"},on:{"update:visible":function(t){e.detailStoreVisible=t}}},[t("el-row",[t("el-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[t("el-select",{attrs:{placeholder:"请选择商品",filterable:"",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.searchDetailForm.id,callback:function(t){e.$set(e.searchDetailForm,"id",t)},expression:"searchDetailForm.id"}},e._l(e.options_storeGoods,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-col",{attrs:{span:8}},[t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"success"},on:{click:e.submitDetailSearchForm}},[t("i",{staticClass:"iconfont icon-r-find",staticStyle:{"font-size":"18px"}}),e._v(" 搜索 ")]),t("el-button",{staticStyle:{"font-size":"18px"},on:{click:e.closeDetailStoreVisible}},[t("i",{staticClass:"iconfont icon-r-no",staticStyle:{"font-size":"18px"}}),e._v(" 关闭 ")])],1),t("el-col",{attrs:{span:8}},[t("i",{staticClass:"iconfont icon-r-add",staticStyle:{"font-size":"28px"}},[t("b",[e._v(" 总存储量："),t("span",{staticStyle:{color:"#fc4316"}},[e._v(e._s(e.totalStoreNum1?e.totalStoreNum1:0)+"件")])])])])],1),t("br"),t("div",{staticClass:"table",staticStyle:{overflow:"auto",height:"300px"}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData1,size:"medium"}},[t("el-table-column",{attrs:{type:"index",width:"200",label:"序号"}}),t("el-table-column",{attrs:{prop:"goodsName","show-overflow-tooltip":!0,label:"商品名"}}),t("el-table-column",{attrs:{prop:"residueNum","show-overflow-tooltip":!0,label:"商品数量"}}),t("el-table-column",{attrs:{prop:"percentage","show-overflow-tooltip":!0,label:"占总存储量"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-progress",{attrs:{type:"circle",width:"70",percentage:r.row.percentage,color:e.customColorMethod}})]}}])})],1),t("div",{staticStyle:{margin:"10px 0 15px 0"}},[t("el-pagination",{attrs:{"current-page":e.searchDetailForm.currentPage,"page-sizes":[5,10,20,50],"page-size":e.searchDetailForm.pageSize,layout:"total,sizes, prev, pager, next,jumper",total:e.searchDetailForm.total},on:{"size-change":e.handleSizeChange1,"current-change":e.handleCurrentChange1,"update:currentPage":function(t){return e.$set(e.searchDetailForm,"currentPage",t)},"update:current-page":function(t){return e.$set(e.searchDetailForm,"currentPage",t)}}})],1)],1)],1)],1)},o=[],n=r(4464);const i="/inventory_management/store/storage_situation";function s(e){return(0,n.PP)(i+"/queryPageByQo",e)}function l(e){return(0,n.PP)(i+"/queryStoreGoodsByStoreId",e)}var c={data(){return{tableData:[],tableData1:[],totalStoreNum:"",totalStoreNum1:"",searchForm:{total:0,currentPage:1,pageSize:5},searchDetailForm:{total:0,currentPage:1,pageSize:10},options_storeGoods:[],detailStoreVisible:!1}},methods:{init(){s(this.searchForm).then((e=>{e=e.data,200==e.code?(this.totalStoreNum=e.data.totalStoreNum,this.tableData=e.data.page.records,this.searchForm.total=e.data.page.total,this.searchForm.pageSize=e.data.page.size,this.searchForm.currentPage=e.data.page.current):(0,n.lY)(e.msg,"error")}))},handleSizeChange(e){this.searchForm.pageSize=e,this.init(),console.log(`每页 ${e} 条`)},handleCurrentChange(e){this.searchForm.currentPage=e,this.init(),console.log(`当前页: ${e}`)},submitSearchForm(){this.init()},init1(){l(this.searchDetailForm).then((e=>{e=e.data,200==e.code?(this.options_storeGoods=e.data.optionsStoreGoods,this.totalStoreNum1=e.data.totalStoreNum1,this.tableData1=e.data.vos.records,this.searchDetailForm.total=e.data.vos.total,this.searchDetailForm.pageSize=e.data.vos.size,this.searchDetailForm.currentPage=e.data.vos.current,this.detailStoreVisible=!0):(0,n.lY)(e.msg,"error")}))},detailStoreBtn(e){this.options_storeGoods=[],this.totalStoreNum1="",this.searchDetailForm.storeId=e.storeId,this.init1()},handleSizeChange1(e){this.searchDetailForm.pageSize=e,this.init1(),console.log(`每页 ${e} 条`)},handleCurrentChange1(e){this.searchDetailForm.currentPage=e,this.init1(),console.log(`当前页: ${e}`)},submitDetailSearchForm(){this.init1()},customColorMethod(e){return e<30?"#f56c6c":e<70?"#e6a23c":"#67c23a"},closeDetailStoreVisible(){this.searchDetailForm={total:0,currentPage:1,pageSize:10},this.detailStoreVisible=!1}},mounted(){this.init()}},u=c,d=r(1656),p=(0,d.A)(u,a,o,!1,null,null,null),h=p.exports},2399:function(e,t,r){r.d(t,{eF:function(){return i},gf:function(){return n},kD:function(){return s},o7:function(){return l}});var a=r(8987);const o="token";function n(){return a.A.get(o)}function i(){return a.A.remove(o)}function s(){let e=a.A.get("employee");return JSON.parse(e)}function l(e){a.A.remove(e)}},4464:function(e,t,r){r.d(t,{NY:function(){return p},PP:function(){return d},hW:function(){return h},lY:function(){return m}});var a=r(2399),o=r(4335),n=r(1052),i=r(8987),s=r(5373),l=r.n(s);const c="http://sun.ipyingshe.com";function u(){var e=(0,a.gf)();return e&&(0,o.A)({url:c+"/checkedToken",method:"GET",params:{token:e}}).then((e=>{e=e.data,200==e.code&&(i.A.set("token",e.data.token,{expires:1/48}),i.A.set("employee",JSON.stringify(e.data.employee),{expires:1/48}))})).catch((e=>{console.log(e)})),e}function d(e,t){return(0,o.A)({url:c+e,method:"POST",headers:{token:u()},data:l().stringify(t)}).catch((e=>{console.log(e),void 0==e.response||void 0==e.response.data?m(e,"error"):m(e.response.data,"error")}))}function p(e,t){return(0,o.A)({url:c+e,method:"POST",headers:{"Content-Type":"application/json",token:u()},data:t}).catch((e=>{console.log(e),void 0==e.response||void 0==e.response.data?m(e,"error"):m(e.response.data,"error")}))}function h(e,t){return(0,o.A)({url:c+e,method:"GET",headers:{token:u()},params:t}).catch((e=>{console.log(e),void 0==e.response||void 0==e.response.data?m(e,"error"):m(e.response.data,"error")}))}function m(e,t){switch(t){case"warning":n.Message.warning(e);break;case"error":n.Message.error({message:e,duration:5e3,showClose:!0});break;case"info":n.Message.info(e);break;default:n.Message.success(e)}}},8987:function(e,t,r){
/*! js-cookie v3.0.5 | MIT */
function a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)e[a]=r[a]}return e}r.d(t,{A:function(){return i}});var o={read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function n(e,t){function r(r,o,n){if("undefined"!==typeof document){n=a({},t,n),"number"===typeof n.expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),r=encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in n)n[s]&&(i+="; "+s,!0!==n[s]&&(i+="="+n[s].split(";")[0]));return document.cookie=r+"="+e.write(o,r)+i}}function o(t){if("undefined"!==typeof document&&(!arguments.length||t)){for(var r=document.cookie?document.cookie.split("; "):[],a={},o=0;o<r.length;o++){var n=r[o].split("="),i=n.slice(1).join("=");try{var s=decodeURIComponent(n[0]);if(a[s]=e.read(i,s),t===s)break}catch(l){}}return t?a[t]:a}}return Object.create({set:r,get:o,remove:function(e,t){r(e,"",a({},t,{expires:-1}))},withAttributes:function(e){return n(this.converter,a({},this.attributes,e))},withConverter:function(e){return n(a({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var i=n(o,{path:"/"})}}]);
//# sourceMappingURL=896.729e1e5c.js.map