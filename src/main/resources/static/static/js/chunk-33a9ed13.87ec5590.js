(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33a9ed13"],{"0543":function(e,t,o){"use strict";o.d(t,"b",(function(){return s})),o.d(t,"c",(function(){return a})),o.d(t,"e",(function(){return l})),o.d(t,"d",(function(){return i})),o.d(t,"a",(function(){return c}));var r=o("b775"),n="/sale/saleRecord";function s(){return Object(r["a"])({url:n+"/getCn",method:"get"})}function a(){return Object(r["a"])({url:n+"/getOptionSaleRecordsGoods",method:"get"})}function l(e){return Object(r["a"])({url:n+"/saveSaleRecords",method:"post",data:e})}function i(e){return Object(r["a"])({url:n+"/queryPageByQoSaleRecords",method:"post",data:e})}function c(e){return Object(r["a"])({url:n+"/delSaleRecords",method:"get",params:e})}},"083a":function(e,t,o){"use strict";var r=o("0d51"),n=TypeError;e.exports=function(e,t){if(!delete e[t])throw n("Cannot delete property "+r(t)+" of "+r(e))}},"0872":function(e,t,o){"use strict";o.d(t,"d",(function(){return s})),o.d(t,"a",(function(){return a})),o.d(t,"e",(function(){return l})),o.d(t,"f",(function(){return i})),o.d(t,"b",(function(){return c})),o.d(t,"c",(function(){return d}));var r=o("b775"),n="/member/member";function s(e){return Object(r["a"])({url:n+"/queryPageByQo",method:"post",data:e})}function a(e){return Object(r["a"])({url:n+"/delMember",method:"post",data:e})}function l(e){return Object(r["a"])({url:n+"/save",method:"post",data:e})}function i(e){return Object(r["a"])({url:n+"/update",method:"post",data:e})}function c(e){return Object(r["a"])({url:n+"/queryMemberById",method:"get",params:e})}function d(e){return Object(r["a"])({url:n+"/queryMemberByPhone",method:"get",params:e})}},1148:function(e,t,o){"use strict";var r=o("5926"),n=o("577e"),s=o("1d80"),a=RangeError;e.exports=function(e){var t=n(s(this)),o="",l=r(e);if(l<0||l==1/0)throw a("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(t+=t))1&l&&(o+=t);return o}},"11c1":function(e,t,o){"use strict";o.d(t,"b",(function(){return s})),o.d(t,"d",(function(){return a})),o.d(t,"g",(function(){return l})),o.d(t,"h",(function(){return i})),o.d(t,"a",(function(){return c})),o.d(t,"e",(function(){return d})),o.d(t,"f",(function(){return u})),o.d(t,"c",(function(){return m}));var r=o("b775"),n="/goods/goods";function s(e){return Object(r["a"])({url:n+"/queryPageByQo",method:"post",data:e})}function a(e){return Object(r["a"])({url:n+"/save",method:"post",data:e})}function l(e){return Object(r["a"])({url:n+"/upOrdown",method:"post",data:e})}function i(e){return Object(r["a"])({url:n+"/update",method:"post",data:e})}function c(e){return Object(r["a"])({url:n+"/queryGoodsById",method:"get",params:e})}function d(){return Object(r["a"])({url:n+"/selected_goodsAll",method:"get"})}function u(){return Object(r["a"])({url:n+"/selected_storeAll",method:"get"})}function m(e){return Object(r["a"])({url:n+"/returnGoods",method:"post",data:e})}},"25eb":function(e,t,o){var r=o("23e7"),n=o("c20d");r({target:"Number",stat:!0,forced:Number.parseInt!=n},{parseInt:n})},"3d6d":function(e,t,o){"use strict";o.d(t,"h",(function(){return s})),o.d(t,"b",(function(){return a})),o.d(t,"g",(function(){return l})),o.d(t,"i",(function(){return i})),o.d(t,"d",(function(){return c})),o.d(t,"f",(function(){return d})),o.d(t,"a",(function(){return u})),o.d(t,"e",(function(){return m})),o.d(t,"c",(function(){return f}));var r=o("b775"),n="/sale/pointRedemption";function s(e){return Object(r["a"])({url:n+"/queryPointProductByMemberId",method:"get",params:e})}function a(e){return Object(r["a"])({url:n+"/queryMemberByGoodsId",method:"get",params:e})}function l(e){return Object(r["a"])({url:n+"/queryPointProductByGoodsId",method:"get",params:e})}function i(e){return Object(r["a"])({url:n+"/savePointRedemptionRecords",method:"post",data:e})}function c(){return Object(r["a"])({url:n+"/queryOptionsMemberPhone",method:"get"})}function d(e){return Object(r["a"])({url:n+"/queryPageByQoExchangePointProducts",method:"post",data:e})}function u(e){return Object(r["a"])({url:n+"/delExchangePointProducts",method:"get",params:e})}function m(){return Object(r["a"])({url:n+"/queryOptionsPointProducts",method:"get"})}function f(){return Object(r["a"])({url:n+"/queryOptionsMember",method:"get"})}},"5f87":function(e,t,o){"use strict";o.d(t,"b",(function(){return a})),o.d(t,"d",(function(){return l})),o.d(t,"c",(function(){return i})),o.d(t,"a",(function(){return c}));o("b64b");var r=o("852e"),n=o.n(r),s="token";function a(){return n.a.get(s)}function l(){return n.a.remove(s)}function i(){var e=n.a.get("employee");return JSON.parse(e)}function c(e){n.a.remove(e)}},"648c":function(e,t,o){},"8bee":function(e,t,o){"use strict";o("648c")},"91fc":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=this,o=t.$createElement,r=t._self._c||o;return r("div",{attrs:{id:"sale_cmd"}},[t._m(0),r("div",{staticClass:"cmd"},[r("el-col",{attrs:{span:12}},[r("button",{on:{click:t.saleBtn}},[r("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"32px"}}),t._v(" 购物结账 ")])]),r("el-col",{attrs:{span:12}},[r("button",{on:{click:t.exchangePointProductBtn}},[r("i",{staticClass:"iconfont icon-r-refresh",staticStyle:{"font-size":"32px"}}),t._v(" 积分兑换 ")])]),r("el-col",{attrs:{span:12}},[r("button",{on:{click:t.saleRecordsBtn}},[r("i",{staticClass:"iconfont icon-r-paper",staticStyle:{"font-size":"32px"}}),t._v(" 销售记录 ")])]),r("el-col",{attrs:{span:12}},[r("button",{on:{click:t.exchangePointProductsRecordsBtn}},[r("i",{staticClass:"iconfont icon-r-find",staticStyle:{"font-size":"32px"}}),t._v(" 兑换记录 ")])])],1),r("el-dialog",{attrs:{title:"销售商品",visible:t.newVisable,width:"80%"},on:{"update:visible":function(e){t.newVisable=e}}},[r("el-form",{ref:"newForm",staticClass:"demo-ruleForm",attrs:{model:t.newForm,rules:t.rules,"label-width":"100px"}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"销售编号："}},[r("el-input",{attrs:{disabled:"",placeholder:"如：销售编号"},model:{value:t.newForm.cn,callback:function(e){t.$set(t.newForm,"cn",e)},expression:"newForm.cn"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[t.newForm.sellTime?r("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"支付方式：",prop:"sellway"}},[r("el-radio",{attrs:{disabled:"",type:"radio",label:"0"},model:{value:t.newForm.sellway,callback:function(e){t.$set(t.newForm,"sellway",e)},expression:"newForm.sellway"}},[t._v("支付宝 ")]),r("el-radio",{attrs:{disabled:"",type:"radio",label:"1"},model:{value:t.newForm.sellway,callback:function(e){t.$set(t.newForm,"sellway",e)},expression:"newForm.sellway"}},[t._v("微信 ")]),r("el-radio",{attrs:{disabled:"",type:"radio",label:"2"},model:{value:t.newForm.sellway,callback:function(e){t.$set(t.newForm,"sellway",e)},expression:"newForm.sellway"}},[t._v("现金 ")]),r("el-radio",{attrs:{disabled:"",type:"radio",label:"3"},model:{value:t.newForm.sellway,callback:function(e){t.$set(t.newForm,"sellway",e)},expression:"newForm.sellway"}},[t._v("银行卡 ")])],1):r("el-form-item",{attrs:{label:"支付方式：",prop:"sellway"}},[r("el-radio",{attrs:{type:"radio",label:"0"},model:{value:t.newForm.sellway,callback:function(e){t.$set(t.newForm,"sellway",e)},expression:"newForm.sellway"}},[t._v("支付宝 ")]),r("el-radio",{attrs:{type:"radio",label:"1"},model:{value:t.newForm.sellway,callback:function(e){t.$set(t.newForm,"sellway",e)},expression:"newForm.sellway"}},[t._v("微信 ")]),r("el-radio",{attrs:{type:"radio",label:"2"},model:{value:t.newForm.sellway,callback:function(e){t.$set(t.newForm,"sellway",e)},expression:"newForm.sellway"}},[t._v("现金 ")]),r("el-radio",{attrs:{type:"radio",label:"3"},model:{value:t.newForm.sellway,callback:function(e){t.$set(t.newForm,"sellway",e)},expression:"newForm.sellway"}},[t._v("银行卡 ")])],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[t.newForm.sellTime?r("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"顾客类型：",prop:"type"}},[r("el-radio",{attrs:{disabled:"",type:"radio",label:"1"},on:{change:function(){"1"==e.newForm.type?e.newForm.sellTotalmoney=(.9*e.totalMoney).toFixed(2):e.newForm.sellTotalmoney=e.totalMoney.toFixed(2)}},model:{value:t.newForm.type,callback:function(e){t.$set(t.newForm,"type",e)},expression:"newForm.type"}},[t._v("会员 ")]),r("el-radio",{attrs:{disabled:"",type:"radio",label:"0"},on:{change:function(){"1"==e.newForm.type?e.newForm.sellTotalmoney=(.9*e.totalMoney).toFixed(2):e.newForm.sellTotalmoney=e.totalMoney.toFixed(2)}},model:{value:t.newForm.type,callback:function(e){t.$set(t.newForm,"type",e)},expression:"newForm.type"}},[t._v("非会员 ")])],1):r("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"顾客类型：",prop:"type"}},[r("el-radio",{attrs:{type:"radio",label:"1"},on:{change:function(){"1"==e.newForm.type?e.newForm.sellTotalmoney=(.9*e.totalMoney).toFixed(2):e.newForm.sellTotalmoney=e.totalMoney.toFixed(2)}},model:{value:t.newForm.type,callback:function(e){t.$set(t.newForm,"type",e)},expression:"newForm.type"}},[t._v("会员 ")]),r("el-radio",{attrs:{type:"radio",label:"0"},on:{change:function(){"1"==e.newForm.type?e.newForm.sellTotalmoney=(.9*e.totalMoney).toFixed(2):e.newForm.sellTotalmoney=e.totalMoney.toFixed(2)}},model:{value:t.newForm.type,callback:function(e){t.$set(t.newForm,"type",e)},expression:"newForm.type"}},[t._v("非会员 ")])],1)],1),"1"==t.newForm.type?r("el-col",{attrs:{span:12}},[r("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"会员账号：",prop:"memberPhone"}},[r("el-input",{attrs:{placeholder:"如：电话号码"},on:{change:function(e){return t.queryMemberByPhone(t.newForm.memberPhone)}},model:{value:t.newForm.memberPhone,callback:function(e){t.$set(t.newForm,"memberPhone",e)},expression:"newForm.memberPhone"}})],1)],1):t._e(),"1"==t.newForm.type&&t.newForm.sellTime?r("el-col",{attrs:{span:12}},[r("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"会员账号：",prop:"memberPhone"}},[r("el-input",{attrs:{readonly:"",placeholder:"如：电话号码"},model:{value:t.newForm.memberPhone,callback:function(e){t.$set(t.newForm,"memberPhone",e)},expression:"newForm.memberPhone"}})],1)],1):t._e()],1),r("hr"),r("el-row",[r("el-col",{staticStyle:{"text-align":"left","margin-bottom":"10px"},attrs:{span:24}},[r("el-button",{attrs:{type:"success"},on:{click:t.addGoodsBtn}},[r("i",{staticClass:"iconfont icon-r-add"}),t._v(" 添加商品 ")])],1),r("el-col",{attrs:{span:24}},[r("el-table",{staticStyle:{width:"100%","border-top":"1px solid lightgrey"},attrs:{data:t.newForm.detailSaleRecords,size:"medium"}},[r("el-table-column",{attrs:{prop:"goodsId",label:"商品编号"}}),r("el-table-column",{attrs:{prop:"goodsName",label:"商品名"}}),r("el-table-column",{attrs:{prop:"goodsNum",width:"400px",label:"数量"},scopedSlots:t._u([t.newForm.sellTime?{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"success"}},[t._v("+")]),r("el-input",{staticStyle:{width:"100px"},attrs:{readonly:"",type:"number",min:"1"},model:{value:e.row.goodsNum,callback:function(o){t.$set(e.row,"goodsNum",o)},expression:"scope.row.goodsNum"}}),r("el-button",{attrs:{type:"success"}},[t._v("-")])]}}:{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"success"},on:{click:function(o){return t.redueGoodsNum(e.row)}}},[t._v("- ")]),r("el-input",{staticStyle:{width:"100px"},attrs:{readonly:"",type:"number",min:"1"},model:{value:e.row.goodsNum,callback:function(o){t.$set(e.row,"goodsNum",o)},expression:"scope.row.goodsNum"}}),r("el-button",{attrs:{type:"success"},on:{click:function(o){return t.addGoodsNum(e.row)}}},[t._v("+ ")])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"goodsPrice",label:"商品单价"}}),t.newForm.sellTime?t._e():r("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"danger"},on:{click:function(o){return t.removedetailRecords(e.row)}}},[t._v("移除 ")])]}}],null,!1,2101801505)})],1)],1)],1),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t.newForm.sellTime?r("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"备注："}},[r("el-input",{attrs:{disabled:"",type:"textarea",placeholder:"如：订单1"},model:{value:t.newForm.info,callback:function(e){t.$set(t.newForm,"info",e)},expression:"newForm.info"}})],1):r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"备注："}},[r("el-input",{attrs:{type:"textarea",placeholder:"如：订单1"},model:{value:t.newForm.info,callback:function(e){t.$set(t.newForm,"info",e)},expression:"newForm.info"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:24}},[t.newForm.detailSaleRecords.length>0?r("div",[t._v(" 订单号："+t._s(t.newForm.cn)+" 商品总数："+t._s(t.newForm.sellTotal?t.newForm.sellTotal:0)+" 总共："+t._s(t.totalMoney?t.totalMoney:0)+"元 消费："+t._s(t.newForm.sellTotalmoney?parseFloat(t.newForm.sellTotalmoney).toFixed(2):0)+"元 "),t.newForm.sellway?r("span",[t._v("支付方式："+t._s("0"==t.newForm.sellway?"支付宝":"1"==t.newForm.sellway?"微信":"2"==t.newForm.sellway?"现金":"银行卡")+" ")]):t._e(),"1"==t.newForm.type?r("span",[t._v("会员享受9折 优惠"+t._s(t.totalMoney?parseFloat(t.totalMoney-t.newForm.sellTotalmoney).toFixed(2):0)+"元 ")]):t._e(),t.newForm.sellTime?r("span",[t._v("消费时间："+t._s(t.newForm.sellTime)+" 操作者编号："+t._s(t.newForm.eid))]):t._e()]):t._e()])],1),r("hr"),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",[t.newForm.sellTime?t._e():r("el-button",{staticStyle:{"font-size":"22px"},attrs:{type:"success"},on:{click:function(e){return t.submitNewForm("newForm")}}},[r("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"22px"}}),t._v(" 支付 ")]),r("el-button",{staticStyle:{"font-size":"22px"},attrs:{type:"info"},on:{click:function(e){return t.closeNewForm("newForm")}}},[r("i",{staticClass:"iconfont icon-r-no",staticStyle:{"font-size":"22px"}}),t._v(" 关闭 ")])],1)],1)],1)],1)],1),r("el-dialog",{attrs:{title:"添加商品",visible:t.addGoodsVisable,width:"70%"},on:{"update:visible":function(e){t.addGoodsVisable=e}}},[r("el-form",{ref:"detailSaleRecords",staticClass:"demo-ruleForm",attrs:{model:t.detailSaleRecords,rules:t.rules}},[r("el-form-item",{attrs:{label:"商品：",prop:"goodsId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择商品",filterable:"",clearable:""},on:{change:t.selectedAddGoods},model:{value:t.detailSaleRecords.goodsId,callback:function(e){t.$set(t.detailSaleRecords,"goodsId",e)},expression:"detailSaleRecords.goodsId"}},t._l(t.options_saleRecordsAddGoods,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"数量："}},[r("el-input",{attrs:{type:"number",min:"1",max:t.goodsNum_max,placeholder:" "+(t.goodsNum_max?"库存数量："+t.goodsNum_max:"")},on:{change:function(){e.$forceUpdate(),e.goodsNum_max<e.detailSaleRecords.goodsNum?e.detailSaleRecords.goodsNum=e.goodsNum_max:e.detailSaleRecords.goodsNum<1&&(e.detailSaleRecords.goodsNum=1)}},model:{value:t.detailSaleRecords.goodsNum,callback:function(e){t.$set(t.detailSaleRecords,"goodsNum",e)},expression:"detailSaleRecords.goodsNum"}})],1),r("el-form-item",{attrs:{label:"单价：",prop:"goodsId"}},[r("el-input",{attrs:{disabled:""},model:{value:t.detailSaleRecords.goodsPrice,callback:function(e){t.$set(t.detailSaleRecords,"goodsPrice",e)},expression:"detailSaleRecords.goodsPrice"}})],1),r("el-form-item",[r("el-button",{staticStyle:{"font-size":"22px"},attrs:{type:"success"},on:{click:t.addDetailSaleRecords}},[r("i",{staticClass:"iconfont icon-r-add",staticStyle:{"font-size":"22px"}}),t._v(" 添加 ")]),r("el-button",{staticStyle:{"font-size":"22px"},attrs:{type:"info"},on:{click:function(){e.addGoodsVisable=!1,e.detailSaleRecords={},e.options_saleRecordsAddGoods=[],e.goodsNum_max=""}}},[r("i",{staticClass:"iconfont icon-r-no",staticStyle:{"font-size":"22px"}}),t._v(" 取消 ")])],1)],1)],1),r("el-dialog",{attrs:{title:"积分兑换",visible:t.pointProductsVisable,"label-width":"200",width:"40%"},on:{"update:visible":function(e){t.pointProductsVisable=e}}},[r("el-form",{ref:"pointProductsForm",staticClass:"demo-ruleForm",attrs:{model:t.pointProductsForm,rules:t.rules}},[t.confirmVisiable?r("el-form-item",[r("img",{attrs:{width:"100px",src:t.BaseApi+t.pointProductsForm.coverUrl,alt:"商品图片"}})]):t._e(),t.confirmVisiable?t._e():r("el-form-item",{attrs:{label:"会员账号：",prop:"memberId"}},[r("el-select",{attrs:{placeholder:"请选择会员",filterable:"",clearable:""},on:{change:t.queryPointProductByMemberId},model:{value:t.pointProductsForm.memberId,callback:function(e){t.$set(t.pointProductsForm,"memberId",e)},expression:"pointProductsForm.memberId"}},t._l(t.options_members,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t.confirmVisiable?r("el-form-item",{attrs:{label:"会员账号：",prop:"memberId"}},[r("el-select",{attrs:{disabled:"",placeholder:"请选择会员",filterable:"",clearable:""},on:{change:t.queryPointProductByMemberId},model:{value:t.pointProductsForm.memberId,callback:function(e){t.$set(t.pointProductsForm,"memberId",e)},expression:"pointProductsForm.memberId"}},t._l(t.options_members,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):t._e(),t.confirmVisiable?t._e():r("el-form-item",{attrs:{label:"积分商品：",prop:"goodsId"}},[r("el-select",{attrs:{placeholder:"请选择积分商品",filterable:"",clearable:""},on:{change:t.queryPointProductByGoodsId},model:{value:t.pointProductsForm.goodsId,callback:function(e){t.$set(t.pointProductsForm,"goodsId",e)},expression:"pointProductsForm.goodsId"}},t._l(t.options_pointProducts,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t.confirmVisiable?r("el-form-item",{attrs:{label:"积分商品：",prop:"goodsId"}},[r("el-select",{attrs:{disabled:"",placeholder:"请选择积分商品",filterable:"",clearable:""},on:{change:t.queryPointProductByGoodsId},model:{value:t.pointProductsForm.goodsId,callback:function(e){t.$set(t.pointProductsForm,"goodsId",e)},expression:"pointProductsForm.goodsId"}},t._l(t.options_pointProducts,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):t._e(),t.confirmVisiable?r("el-form-item",{attrs:{label:"所需积分："}},[r("el-input",{attrs:{disabled:"",type:"number",placeholder:"所需积分"},model:{value:t.pointProductsForm.integral,callback:function(e){t.$set(t.pointProductsForm,"integral",e)},expression:"pointProductsForm.integral"}})],1):t._e(),r("el-form-item",[t.confirmVisiable?r("el-button",{staticStyle:{"font-size":"22px"},attrs:{type:"primary"},on:{click:function(e){return t.submitPointProductsForm("pointProductsForm")}}},[r("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"22px"}}),t._v(" 确认兑换 ")]):t._e(),t.confirmVisiable?r("el-button",{staticStyle:{"font-size":"22px"},attrs:{type:"info"},on:{click:t.closePointProductsForm}},[r("i",{staticClass:"iconfont icon-r-no",staticStyle:{"font-size":"22px"}}),t._v(" 关闭 ")]):t._e(),t.confirmVisiable?t._e():r("el-button",{staticStyle:{"font-size":"22px"},attrs:{type:"success"},on:{click:function(e){return t.confirmPointProducts("pointProductsForm")}}},[r("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"22px"}}),t._v(" 兑换 ")]),t.confirmVisiable?t._e():r("el-button",{staticStyle:{"font-size":"22px"},attrs:{type:"info"},on:{click:t.closeConfirmPointProducts}},[r("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"22px"}}),t._v(" 关闭 ")])],1)],1)],1)],1)},n=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"head"},[o("i",{staticClass:"iconfont icon-r-home",staticStyle:{"font-size":"42px"}}),e._v(" 销售主页 ")])}],s=o("b85c"),a=o("5530"),l=(o("14d9"),o("a434"),o("b0c0"),o("25eb"),o("b680"),o("e2a7")),i=o("0543"),c=o("11c1"),d=o("0872"),u=o("3d6d"),m={data:function(){return{BaseApi:this.$store.state.BaseApi,confirmVisiable:!1,newVisable:!1,addGoodsVisable:!1,paymentCodeVisable:!1,goodsNum_max:"",totalMoney:"",options_saleRecordsAddGoods:[],detailSaleRecords:{},newForm:{cn:"",sellway:"1",info:"",sellTotal:"",sellTotalmoney:"",type:"0",detailSaleRecords:[]},pointProductsForm:{memberId:"",goodsId:"",coverUrl:"",integral:""},options_members:[],options_pointProducts:[],pointProductsVisable:!1,rules:{sellway:[{required:!0,message:"支付方式未选择",trigger:"blur"}],type:[{required:!0,message:"顾客类型未选择",trigger:"blur"}],memberPhone:[{required:!0,message:"会员电话号码未填写",trigger:"blur"}],goodsId:[{required:!0,message:"商品不能为空",trigger:"blur"}],memberId:[{required:!0,message:"会员编号不能为空",trigger:"blur"}]}}},methods:{confirmPointProducts:function(e){var t=this;this.$refs[e].validate((function(e){e&&(Object(u["g"])({goodsId:t.pointProductsForm.goodsId}).then((function(e){if(200===e.code){if(!e.data)return void(t.pointProductsForm={memberId:t.pointProductsForm.memberId,goodsId:t.pointProductsForm.goodsId,coverUrl:"",integral:""});t.pointProductsForm.integral=e.data.integral,t.pointProductsForm.coverUrl=e.data.coverUrl}else Object(l["a"])(e.msg,"error")})),t.confirmVisiable=!0)}))},closeConfirmPointProducts:function(){this.confirmVisiable=!1,this.pointProductsVisable=!1,this.pointProductsForm={memberId:"",goodsId:"",coverUrl:"",integral:""}},queryPointProductByMemberId:function(){var e=this;Object(u["h"])({memberId:this.pointProductsForm.memberId}).then((function(t){if(200===t.code){if(e.options_pointProducts=t.data,!e.options_pointProducts.length)return Object(l["a"])("该会员积分数无法兑换任何商品","warning"),void(e.pointProductsForm.goodsId="")}else Object(l["a"])(t.msg,"error")}))},queryPointProductByGoodsId:function(){var e=this;Object(u["b"])({goodsId:this.pointProductsForm.goodsId}).then((function(t){if(200===t.code&&(e.options_members=t.data,!e.options_members.length))return Object(l["a"])("该商品没有会员符合条件进行兑换","warning"),void(e.pointProductsForm.memberId="")}))},queryOptionsPointProducts:function(){var e=this;Object(u["e"])().then((function(t){200===t.code&&(e.options_pointProducts=t.data)}))},queryOptionsMember:function(){var e=this;Object(u["c"])().then((function(t){200===t.code&&(e.options_members=t.data)}))},submitPointProductsForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&Object(u["i"])(t.pointProductsForm).then((function(e){200===e.code&&(Object(l["a"])("兑换成功"),t.pointProductsForm={},t.pointProductsForm={memberId:"",goodsId:"",coverUrl:"",integral:""},t.pointProductsVisable=!1,t.confirmVisiable=!t.confirmVisiable)}))}))},closePointProductsForm:function(){this.confirmVisiable=!1},queryMemberByPhone:function(e){var t=this;Object(d["c"])({phone:e}).then((function(e){200!=e.code&&(Object(l["a"])(e.msg,"error"),t.newForm.memberPhone="")}))},saleRecordsBtn:function(){this.$router.push("/sale/saleRecordsList")},exchangePointProductsRecordsBtn:function(){this.$router.push("/sale/pointRedemption")},submitNewForm:function(e){var t=this;this.$refs[e].validate((function(e){if(e){if(t.newForm.detailSaleRecords.length<=0)return void Object(l["a"])("还没选择出售的商品","error");Object(i["e"])(t.newForm).then((function(e){200===e.code?(t.newForm=Object(a["a"])({},e.data),console.log(t.newForm),Object(l["a"])("支付成功"),t.paymentCodeVisable=!1):Object(l["a"])("系统正忙,支付失败","error")}))}}))},closeNewForm:function(e){this.$refs[e].resetFields(),this.newForm={cn:"",sellway:"1",info:"",sellTotal:"",sellTotalmoney:"",type:"0",detailSaleRecords:[]},this.newVisable=!1},removedetailRecords:function(e){var t=this;this.$confirm("确定删除这条记录？","警示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){for(var o in t.newForm.sellTotal=parseInt(t.newForm.sellTotal)-e.goodsNum,t.totalMoney=(parseFloat(t.totalMoney)-parseFloat(parseInt(e.goodsNum)*parseFloat(e.goodsPrice))).toFixed(2),"1"==t.newForm.type?t.newForm.sellTotalmoney=parseFloat(t.totalMoney)*.9.toFixed(2):t.newForm.sellTotalmoney=parseFloat(t.totalMoney).toFixed(2),t.newForm.detailSaleRecords)if(t.newForm.detailSaleRecords[o].goodsId==e.goodsId)return void t.newForm.detailSaleRecords.splice(o,1)})).catch((function(){t.$message({type:"info",message:"已取消操作"})}))},addGoodsNum:function(e){var t=this;Object(c["a"])({id:e.goodsId}).then((function(o){if(200===o.code){if(e.goodsNum>=o.data.residueNum)return void Object(l["a"])("货架商品数量没这么多，请联系仓库管理者","warning");e.goodsNum=parseInt(e.goodsNum)+1,t.newForm.sellTotal=parseInt(t.newForm.sellTotal)+1,t.totalMoney=(parseFloat(t.totalMoney)+parseFloat(e.goodsPrice)).toFixed(2),"1"==t.newForm.type?t.newForm.sellTotalmoney=parseFloat(t.totalMoney)*.9.toFixed(2):t.newForm.sellTotalmoney=parseFloat(t.totalMoney).toFixed(2)}}))},redueGoodsNum:function(e){1!=parseInt(e.goodsNum)?(e.goodsNum=parseInt(e.goodsNum)-1,this.newForm.sellTotal=parseInt(this.newForm.sellTotal)-1,this.totalMoney=(parseFloat(this.totalMoney)-parseFloat(e.goodsPrice)).toFixed(2),"1"==this.newForm.type?this.newForm.sellTotalmoney=parseFloat(this.totalMoney)*.9.toFixed(2):this.newForm.sellTotalmoney=parseFloat(this.totalMoney).toFixed(2)):Object(l["a"])("已是最小数量","error")},initOptionSaleRecordsAddGoodsAll:function(){var e=this;Object(i["c"])().then((function(t){200===t.code&&(e.options_saleRecordsAddGoods=t.data,e.options_saleRecordsAddGoods.length>0?e.addGoodsVisable=!0:Object(l["a"])("目前没有可售卖的商品","warning"))}))},addGoodsBtn:function(){this.detailSaleRecords={},this.goodsNum_max="",this.initOptionSaleRecordsAddGoodsAll()},addDetailSaleRecords:function(){if(this.detailSaleRecords.goodsNum){if(this.newForm.sellTotal=Number.parseInt(this.newForm.sellTotal?this.newForm.sellTotal:0)+Number.parseInt(this.detailSaleRecords.goodsNum),this.totalMoney=(this.totalMoney?parseFloat(this.totalMoney):0)+parseInt(this.detailSaleRecords.goodsNum)*parseFloat(this.detailSaleRecords.goodsPrice).toFixed(2),this.totalMoney&&("1"==this.newForm.type?this.newForm.sellTotalmoney=.9*this.totalMoney:this.newForm.sellTotalmoney=this.totalMoney),0==this.newForm.detailSaleRecords.length)this.newForm.detailSaleRecords.unshift(this.detailSaleRecords);else{var e,t=Object(s["a"])(this.newForm.detailSaleRecords);try{for(t.s();!(e=t.n()).done;){var o=e.value;if(o.goodsId==this.detailSaleRecords.goodsId)return o.goodsNum=Number.parseInt(o.goodsNum)+Number.parseInt(this.detailSaleRecords.goodsNum),void(this.addGoodsVisable=!1)}}catch(r){t.e(r)}finally{t.f()}this.newForm.detailSaleRecords.unshift(this.detailSaleRecords)}this.addGoodsVisable=!1}else Object(l["a"])("数量不能为空","warning")},saleBtn:function(){var e=this;Object(i["b"])().then((function(t){200===t.code&&(e.newForm.cn=t.data,e.newVisable=!0)}))},selectedAddGoods:function(){var e=this;Object(c["a"])({id:this.detailSaleRecords.goodsId}).then((function(t){200===t.code&&(e.detailSaleRecords.goodsPrice=t.data.purchashPrice,e.detailSaleRecords.goodsName=t.data.name,e.goodsNum_max=t.data.residueNum)}))},exchangePointProductBtn:function(){this.queryOptionsMember(),this.queryOptionsPointProducts(),this.pointProductsVisable=!0}},mounted:function(){}},f=m,p=(o("8bee"),o("2877")),b=Object(p["a"])(f,r,n,!1,null,null,null);t["default"]=b.exports},a434:function(e,t,o){"use strict";var r=o("23e7"),n=o("7b0b"),s=o("23cb"),a=o("5926"),l=o("07fa"),i=o("3a34"),c=o("3511"),d=o("65f0"),u=o("8418"),m=o("083a"),f=o("1dde"),p=f("splice"),b=Math.max,y=Math.min;r({target:"Array",proto:!0,forced:!p},{splice:function(e,t){var o,r,f,p,h,w,g=n(this),F=l(g),v=s(e,F),P=arguments.length;for(0===P?o=r=0:1===P?(o=0,r=F-v):(o=P-2,r=y(b(a(t),0),F-v)),c(F+o-r),f=d(g,r),p=0;p<r;p++)h=v+p,h in g&&u(f,p,g[h]);if(f.length=r,o<r){for(p=v;p<F-r;p++)h=p+r,w=p+o,h in g?g[w]=g[h]:m(g,w);for(p=F;p>F-r+o;p--)m(g,p-1)}else if(o>r)for(p=F-r;p>v;p--)h=p+r-1,w=p+o-1,h in g?g[w]=g[h]:m(g,w);for(p=0;p<o;p++)g[p+v]=arguments[p+2];return i(g,F-r+o),f}})},b680:function(e,t,o){"use strict";var r=o("23e7"),n=o("e330"),s=o("5926"),a=o("408a"),l=o("1148"),i=o("d039"),c=RangeError,d=String,u=Math.floor,m=n(l),f=n("".slice),p=n(1..toFixed),b=function(e,t,o){return 0===t?o:t%2===1?b(e,t-1,o*e):b(e*e,t/2,o)},y=function(e){var t=0,o=e;while(o>=4096)t+=12,o/=4096;while(o>=2)t+=1,o/=2;return t},h=function(e,t,o){var r=-1,n=o;while(++r<6)n+=t*e[r],e[r]=n%1e7,n=u(n/1e7)},w=function(e,t){var o=6,r=0;while(--o>=0)r+=e[o],e[o]=u(r/t),r=r%t*1e7},g=function(e){var t=6,o="";while(--t>=0)if(""!==o||0===t||0!==e[t]){var r=d(e[t]);o=""===o?r:o+m("0",7-r.length)+r}return o},F=i((function(){return"0.000"!==p(8e-5,3)||"1"!==p(.9,0)||"1.25"!==p(1.255,2)||"1000000000000000128"!==p(0xde0b6b3a7640080,0)}))||!i((function(){p({})}));r({target:"Number",proto:!0,forced:F},{toFixed:function(e){var t,o,r,n,l=a(this),i=s(e),u=[0,0,0,0,0,0],p="",F="0";if(i<0||i>20)throw c("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return d(l);if(l<0&&(p="-",l=-l),l>1e-21)if(t=y(l*b(2,69,1))-69,o=t<0?l*b(2,-t,1):l/b(2,t,1),o*=4503599627370496,t=52-t,t>0){h(u,0,o),r=i;while(r>=7)h(u,1e7,0),r-=7;h(u,b(10,r,1),0),r=t-1;while(r>=23)w(u,1<<23),r-=23;w(u,1<<r),h(u,1,1),w(u,2),F=g(u)}else h(u,0,o),h(u,1<<-t,0),F=g(u)+m("0",i);return i>0?(n=F.length,F=p+(n<=i?"0."+m("0",i-n)+F:f(F,0,n-i)+"."+f(F,n-i))):F=p+F,F}})},b775:function(e,t,o){"use strict";o("c7eb"),o("1da1"),o("5530");var r=o("53ca"),n=(o("d9e2"),o("caad"),o("fb6a"),o("e9c4"),o("b64b"),o("d3b7"),o("2532"),o("bc3a")),s=o.n(n),a=o("5c96"),l=o("4360"),i=o("5f87"),c={401:"认证失败，无法访问系统资源",403:"当前操作没有权限",404:"访问资源不存在",default:"系统未知错误，请反馈给管理员"};o("b85c"),o("a15b"),o("14d9"),o("4d63"),o("c607"),o("ac1f"),o("2c3e"),o("00b4"),o("25f0"),o("5319"),o("1276");function d(e){for(var t="",o=0,n=Object.keys(e);o<n.length;o++){var s=n[o],a=e[s],l=encodeURIComponent(s)+"=";if(null!==a&&""!==a&&"undefined"!==typeof a)if("object"===Object(r["a"])(a))for(var i=0,c=Object.keys(a);i<c.length;i++){var d=c[i];if(null!==a[d]&&""!==a[d]&&"undefined"!==typeof a[d]){var u=s+"["+d+"]",m=encodeURIComponent(u)+"=";t+=m+encodeURIComponent(a[d])+"&"}}else t+=l+encodeURIComponent(a)+"&"}return t}var u={set:function(e,t){sessionStorage&&null!=e&&null!=t&&sessionStorage.setItem(e,t)},get:function(e){return sessionStorage?null==e?null:sessionStorage.getItem(e):null},setJSON:function(e,t){null!=t&&this.set(e,JSON.stringify(t))},getJSON:function(e){var t=this.get(e);if(null!=t)return JSON.parse(t)},remove:function(e){sessionStorage.removeItem(e)}},m={set:function(e,t){localStorage&&null!=e&&null!=t&&localStorage.setItem(e,t)},get:function(e){return localStorage?null==e?null:localStorage.getItem(e):null},setJSON:function(e,t){null!=t&&this.set(e,JSON.stringify(t))},getJSON:function(e){var t=this.get(e);if(null!=t)return JSON.parse(t)},remove:function(e){localStorage.removeItem(e)}},f={session:u,local:m},p=(o("21a6"),{show:!1});s.a.defaults.headers["Content-Type"]="application/json;charset=utf-8";var b=s.a.create({baseURL:"/",timeout:1e4});b.interceptors.request.use((function(e){var t=!1===(e.headers||{}).isToken,o=!1===(e.headers||{}).repeatSubmit;if(Object(i["b"])()&&!t&&(e.headers["token"]=Object(i["b"])()),"get"===e.method&&e.params){var n=e.url+"?"+d(e.params);n=n.slice(0,-1),e.params={},e.url=n}if(!o&&("post"===e.method||"put"===e.method)){var s={url:e.url,data:"object"===Object(r["a"])(e.data)?JSON.stringify(e.data):e.data,time:(new Date).getTime()},a=f.session.getJSON("sessionObj");if(void 0===a||null===a||""===a)f.session.setJSON("sessionObj",s);else{var l=a.url,c=a.data,u=a.time,m=1e3;if(c===s.data&&s.time-u<m&&l===s.url){var p="数据正在处理，请勿重复提交";return console.warn("[".concat(l,"]: ")+p),Promise.reject(new Error(p))}f.session.setJSON("sessionObj",s)}}return e}),(function(e){console.log(e),Promise.reject(e)})),b.interceptors.response.use((function(e){var t=e.data.code||200,o=e.data.msg,r=c[t]||c["default"];return"blob"===e.request.responseType||"arraybuffer"===e.request.responseType?e.data:401===t?(p.show||(p.show=!0,a["MessageBox"].confirm("登录状态已过期，您可以继续留在该页面，或者重新登录","系统提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){p.show=!1,l["a"].dispatch("LogOut").then((function(){location.href="/index"}))})).catch((function(){p.show=!1}))),Promise.reject("无效的会话，或者会话已过期，请重新登录。")):500===t?(Object(a["Message"])({message:r,type:"error"}),Promise.reject(new Error(r))):601===t?(Object(a["Message"])({message:r,type:"warning"}),Promise.reject("error")):200!==t?(a["Notification"].error({title:o}),Promise.reject("error")):e.data}),(function(e){console.log("err"+e);var t=e.message;return"Network Error"==t?t="后端接口连接异常":t.includes("timeout")?t="系统接口请求超时":t.includes("Request failed with status code")&&(t="系统接口"+t.substr(t.length-3)+"异常"),Object(a["Message"])({message:t,type:"error",duration:5e3}),Promise.reject(e)}));t["a"]=b},c20d:function(e,t,o){var r=o("da84"),n=o("d039"),s=o("e330"),a=o("577e"),l=o("58a8").trim,i=o("5899"),c=r.parseInt,d=r.Symbol,u=d&&d.iterator,m=/^[+-]?0x/i,f=s(m.exec),p=8!==c(i+"08")||22!==c(i+"0x16")||u&&!n((function(){c(Object(u))}));e.exports=p?function(e,t){var o=l(a(e));return c(o,t>>>0||(f(m,o)?16:10))}:c},e2a7:function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var r=o("5c96");function n(e,t){switch(t){case"warning":r["Message"].warning(e);break;case"error":r["Message"].error({message:e,duration:5e3,showClose:!0});break;case"info":r["Message"].info(e);break;default:r["Message"].success(e)}}}}]);