(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ffe90eb6"],{"11c1":function(e,t,o){"use strict";o.d(t,"b",(function(){return a})),o.d(t,"d",(function(){return i})),o.d(t,"g",(function(){return s})),o.d(t,"h",(function(){return l})),o.d(t,"a",(function(){return c})),o.d(t,"e",(function(){return u})),o.d(t,"f",(function(){return d})),o.d(t,"c",(function(){return f}));var n=o("b775"),r="/goods/goods";function a(e){return Object(n["a"])({url:r+"/queryPageByQo",method:"post",data:e})}function i(e){return Object(n["a"])({url:r+"/save",method:"post",data:e})}function s(e){return Object(n["a"])({url:r+"/upOrdown",method:"post",data:e})}function l(e){return Object(n["a"])({url:r+"/update",method:"post",data:e})}function c(e){return Object(n["a"])({url:r+"/queryGoodsById",method:"get",params:e})}function u(){return Object(n["a"])({url:r+"/selected_goodsAll",method:"get"})}function d(){return Object(n["a"])({url:r+"/selected_storeAll",method:"get"})}function f(e){return Object(n["a"])({url:r+"/returnGoods",method:"post",data:e})}},"5f87":function(e,t,o){"use strict";o.d(t,"b",(function(){return i})),o.d(t,"d",(function(){return s})),o.d(t,"c",(function(){return l})),o.d(t,"a",(function(){return c}));o("b64b");var n=o("852e"),r=o.n(n),a="token";function i(){return r.a.get(a)}function s(){return r.a.remove(a)}function l(){var e=r.a.get("employee");return JSON.parse(e)}function c(e){r.a.remove(e)}},"656c":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=this,o=t.$createElement,n=t._self._c||o;return n("div",[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",[t._v("首页")]),n("el-breadcrumb-item",[t._v("商品管理")]),n("el-breadcrumb-item",[t._v("积分商品")])],1),n("br"),n("el-row",[n("el-col",{staticStyle:{"text-align":"left","padding-right":"10px"},attrs:{span:8}},[n("el-input",{attrs:{placeholder:"商品名称"},model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}})],1)],1),n("br"),n("el-row",[n("el-col",{staticStyle:{"text-align":"left","padding-right":"10px"},attrs:{span:24}},[n("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:t.subSearchForm}},[n("i",{staticClass:"iconfont icon-r-find",staticStyle:{"font-size":"18px"}}),t._v(" 搜索 ")]),n("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"success"},on:{click:t.newBtn}},[n("i",{staticClass:"iconfont icon-r-add",staticStyle:{"font-size":"18px"}}),t._v(" 创建积分商品 ")])],1)],1),n("br"),n("div",{staticClass:"table"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,size:"medium"}},[n("el-table-column",{attrs:{type:"index",width:"200",label:"序号"}}),n("el-table-column",{attrs:{prop:"coverUrl","show-overflow-tooltip":!0,label:"封面"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("img",{attrs:{height:"60px",src:t.BaseApi+e.row.coverUrl}})]}}])}),n("el-table-column",{attrs:{prop:"goodsName","show-overflow-tooltip":!0,label:"商品名"}}),n("el-table-column",{attrs:{prop:"integral","show-overflow-tooltip":!0,label:"积分"}}),n("el-table-column",{attrs:{prop:"updateby","show-overflow-tooltip":!0,label:"操作者"}}),n("el-table-column",{attrs:{width:"240",fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"success"},on:{click:function(o){return t.editBtn(e.row.goodsId)}}},[n("i",{staticClass:"iconfont icon-r-edit",staticStyle:{"font-size":"18px"}}),t._v("修改 ")]),n("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"danger"},on:{click:function(o){return t.delBtn(e.row.goodsId)}}},[n("i",{staticClass:"iconfont icon-r-delete",staticStyle:{"font-size":"18px"}}),t._v("删除 ")])]}}])})],1),n("div",{staticStyle:{margin:"10px 0 15px 0"}},[n("el-pagination",{attrs:{"current-page":t.searchForm.currentPage,"page-sizes":[5,10,20,50],"page-size":t.searchForm.pageSize,layout:"total,sizes, prev, pager, next,jumper",total:t.searchForm.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.searchForm,"currentPage",e)},"update:current-page":function(e){return t.$set(t.searchForm,"currentPage",e)}}})],1)],1),n("el-dialog",{attrs:{title:"创建积分商品",visible:t.newVisable,width:"50%"},on:{"update:visible":function(e){t.newVisable=e}}},[n("el-form",{ref:"newForm",staticClass:"demo-ruleForm",attrs:{model:t.newForm,rules:t.rules}},[t.selectGoodsVisiable?n("el-form-item",{attrs:{label:"商品",prop:"goodsId"}},[n("el-select",{attrs:{placeholder:"请选择商品",filterable:"",clearable:""},on:{change:function(e){return t.$forceUpdate()}},model:{value:t.newForm.goodsId,callback:function(e){t.$set(t.newForm,"goodsId",e)},expression:"newForm.goodsId"}},t._l(t.options_goods,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):n("el-form-item",{attrs:{label:"商品",prop:"goodsId"}},[n("el-select",{attrs:{disabled:"",placeholder:"请选择商品",filterable:"",clearable:""},on:{change:function(e){return t.$forceUpdate()}},model:{value:t.newForm.goodsId,callback:function(e){t.$set(t.newForm,"goodsId",e)},expression:"newForm.goodsId"}},t._l(t.options_goods,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t.selectGoodsVisiable?t._e():n("el-form-item",{attrs:{label:"图片："}},[n("img",{staticStyle:{width:"100px"},attrs:{src:t.BaseApi+t.newForm.coverUrl,alt:"商品图片"}})]),t.selectGoodsVisiable?t._e():n("el-form-item",{attrs:{label:"积分：",prop:"integral"}},[n("el-input",{attrs:{type:"number",placeholder:"如：3000"},on:{change:function(){e.newForm.integral<0&&(e.newForm.integral=0)}},model:{value:t.newForm.integral,callback:function(e){t.$set(t.newForm,"integral",e)},expression:"newForm.integral"}})],1),t.selectGoodsVisiable?n("el-form-item",[n("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:function(e){return t.confirmGoods("newForm")}}},[n("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"18px"}}),t._v(" 确定 ")]),n("el-button",{staticStyle:{"font-size":"18px"},on:{click:function(e){return t.closeGoods("newForm")}}},[t._v("关闭 ")])],1):n("el-form-item",[n("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:function(e){return t.submitNewForm("newForm")}}},[n("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"18px"}}),t._v(" 确定 ")]),n("el-button",{staticStyle:{"font-size":"18px"},on:{click:function(e){return t.cancel("newForm")}}},[t._v("取消 ")])],1)],1)],1),n("el-dialog",{attrs:{title:"修改积分商品",visible:t.editVisable,width:"50%"},on:{"update:visible":function(e){t.editVisable=e}}},[n("el-form",{ref:"editForm",staticClass:"demo-ruleForm",attrs:{model:t.editForm,rules:t.rules}},[n("el-form-item",{attrs:{label:"商品",prop:"goodsId"}},[n("el-select",{attrs:{disabled:"",placeholder:"请选择商品",filterable:"",clearable:""},on:{change:function(e){return t.$forceUpdate()}},model:{value:t.editForm.goodsId,callback:function(e){t.$set(t.editForm,"goodsId",e)},expression:"editForm.goodsId"}},t._l(t.options_goods1,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),n("el-form-item",{attrs:{label:"图片："}},[n("img",{staticStyle:{width:"100px"},attrs:{src:t.BaseApi+t.editForm.coverUrl,alt:"商品图片"}})]),n("el-form-item",{attrs:{label:"积分：",prop:"integral"}},[n("el-input",{attrs:{type:"number",placeholder:"如：3000"},on:{change:function(){e.editForm.integral<0&&(e.editForm.integral=0)}},model:{value:t.editForm.integral,callback:function(e){t.$set(t.editForm,"integral",e)},expression:"editForm.integral"}})],1),n("el-form-item",[n("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:function(e){return t.submitEditForm("editForm")}}},[n("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"18px"}}),t._v(" 确定 ")]),n("el-button",{staticStyle:{"font-size":"18px"},on:{click:function(e){return t.cancelEdit("editForm")}}},[t._v("取消 ")])],1)],1)],1)],1)},r=[],a=(o("b0c0"),o("e2a7")),i=o("b775"),s="/goods/pointGoods";function l(e){return Object(i["a"])({url:s+"/queryPageByQo",method:"post",data:e})}function c(e){return Object(i["a"])({url:s+"/del",method:"get",params:e})}function u(){return Object(i["a"])({url:s+"/queryOptionGoods",method:"get"})}function d(e){return Object(i["a"])({url:s+"/savePointGoods",method:"post",data:e})}function f(e){return Object(i["a"])({url:s+"/queryPointGoodsById",method:"get",params:e})}function m(e){return Object(i["a"])({url:s+"/updatePointGoods",method:"post",data:e})}var p=o("11c1"),g={data:function(){return{BaseApi:this.$store.state.BaseApi,tableData:[],searchForm:{pageSize:5},selectGoodsVisiable:!0,newVisable:!1,editVisable:!1,newForm:{goodsId:"",goodsName:"",integral:"",coverUrl:""},editForm:{goodsId:"",goodsName:"",integral:"",coverUrl:""},options_goods:[],options_goods1:[],rules:{goodsId:[{required:!0,message:"商品编号不能为空",trigger:"blur"}],integral:[{required:!0,message:"积分不能为空",trigger:"blur"}]}}},methods:{queryOptionGoods:function(){var e=this;u().then((function(t){200===t.code&&(e.options_goods=t.data)}))},newBtn:function(){0!=this.options_goods.length?(this.newVisable=!0,this.selectGoodsVisable=!0):Object(a["a"])("没有可以添加的积分商品","warning")},closeGoods:function(e){this.$refs[e].resetFields(),this.newVisable=!1},confirmGoods:function(e){var t=this;this.$refs[e].validate((function(e){e&&Object(p["a"])({id:t.newForm.goodsId}).then((function(e){200===e.code&&(t.newForm.coverUrl=e.data.coverUrl,t.newForm.goodsName=e.data.name,t.selectGoodsVisiable=!1)}))}))},submitNewForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&d(t.newForm).then((function(e){200===e.code&&(Object(a["a"])("创建成功"),t.newVisable=!1,t.selectGoodsVisiable=!0,t.newForm={},t.init())}))}))},submitEditForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&m(t.editForm).then((function(e){200===e.code&&(Object(a["a"])("创建成功"),t.editVisable=!1,t.init())}))}))},cancel:function(e){this.$refs[e].resetFields(),this.selectGoodsVisiable=!0},cancelEdit:function(e){this.$refs[e].resetFields(),this.editVisable=!1,this.editForm={}},subSearchForm:function(){this.init()},init:function(){var e=this;this.editForm={goodsId:"",goodsName:"",integral:"",coverUrl:""},this.queryOptionGoods(),l(this.searchForm).then((function(t){200===t.code&&(e.tableData=t.data.records,e.searchForm.total=t.data.total,e.searchForm.pageSize=t.data.size,e.searchForm.currentPage=t.data.current)}))},handleSizeChange:function(e){this.searchForm.pageSize=e,this.init(),console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){this.searchForm.currentPage=e,this.init(),console.log("当前页: ".concat(e))},submitSearchForm:function(){this.init()},delBtn:function(e){var t=this;this.$confirm("确定要删除这条记录？","警示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){c({id:e}).then((function(e){200===e.code&&(Object(a["a"])("删除成功"),t.init())}))})).catch((function(){t.$message({type:"info",message:"已取消操作"})}))},editBtn:function(e){var t=this;f({goodsId:e}).then((function(e){200===e.code&&(t.editVisable=!0,t.editForm.goodsId=e.data.goodsId,t.editForm.goodsName=e.data.goodsName,t.editForm.integral=e.data.integral,t.editForm.coverUrl=e.data.coverUrl)}))}},mounted:function(){var e=this;this.init(),Object(p["e"])().then((function(t){200===t.code&&(e.options_goods1=t.data)}))}},b=g,h=(o("b09d"),o("2877")),v=Object(h["a"])(b,n,r,!1,null,null,null);t["default"]=v.exports},"87e9":function(e,t,o){},b09d:function(e,t,o){"use strict";o("87e9")},b775:function(e,t,o){"use strict";o("c7eb"),o("1da1"),o("5530");var n=o("53ca"),r=(o("d9e2"),o("caad"),o("fb6a"),o("e9c4"),o("b64b"),o("d3b7"),o("2532"),o("bc3a")),a=o.n(r),i=o("5c96"),s=o("4360"),l=o("5f87"),c={401:"认证失败，无法访问系统资源",403:"当前操作没有权限",404:"访问资源不存在",default:"系统未知错误，请反馈给管理员"};o("b85c"),o("a15b"),o("14d9"),o("4d63"),o("c607"),o("ac1f"),o("2c3e"),o("00b4"),o("25f0"),o("5319"),o("1276");function u(e){for(var t="",o=0,r=Object.keys(e);o<r.length;o++){var a=r[o],i=e[a],s=encodeURIComponent(a)+"=";if(null!==i&&""!==i&&"undefined"!==typeof i)if("object"===Object(n["a"])(i))for(var l=0,c=Object.keys(i);l<c.length;l++){var u=c[l];if(null!==i[u]&&""!==i[u]&&"undefined"!==typeof i[u]){var d=a+"["+u+"]",f=encodeURIComponent(d)+"=";t+=f+encodeURIComponent(i[u])+"&"}}else t+=s+encodeURIComponent(i)+"&"}return t}var d={set:function(e,t){sessionStorage&&null!=e&&null!=t&&sessionStorage.setItem(e,t)},get:function(e){return sessionStorage?null==e?null:sessionStorage.getItem(e):null},setJSON:function(e,t){null!=t&&this.set(e,JSON.stringify(t))},getJSON:function(e){var t=this.get(e);if(null!=t)return JSON.parse(t)},remove:function(e){sessionStorage.removeItem(e)}},f={set:function(e,t){localStorage&&null!=e&&null!=t&&localStorage.setItem(e,t)},get:function(e){return localStorage?null==e?null:localStorage.getItem(e):null},setJSON:function(e,t){null!=t&&this.set(e,JSON.stringify(t))},getJSON:function(e){var t=this.get(e);if(null!=t)return JSON.parse(t)},remove:function(e){localStorage.removeItem(e)}},m={session:d,local:f},p=(o("21a6"),{show:!1});a.a.defaults.headers["Content-Type"]="application/json;charset=utf-8";var g=a.a.create({baseURL:"/",timeout:1e4});g.interceptors.request.use((function(e){var t=!1===(e.headers||{}).isToken,o=!1===(e.headers||{}).repeatSubmit;if(Object(l["b"])()&&!t&&(e.headers["token"]=Object(l["b"])()),"get"===e.method&&e.params){var r=e.url+"?"+u(e.params);r=r.slice(0,-1),e.params={},e.url=r}if(!o&&("post"===e.method||"put"===e.method)){var a={url:e.url,data:"object"===Object(n["a"])(e.data)?JSON.stringify(e.data):e.data,time:(new Date).getTime()},i=m.session.getJSON("sessionObj");if(void 0===i||null===i||""===i)m.session.setJSON("sessionObj",a);else{var s=i.url,c=i.data,d=i.time,f=1e3;if(c===a.data&&a.time-d<f&&s===a.url){var p="数据正在处理，请勿重复提交";return console.warn("[".concat(s,"]: ")+p),Promise.reject(new Error(p))}m.session.setJSON("sessionObj",a)}}return e}),(function(e){console.log(e),Promise.reject(e)})),g.interceptors.response.use((function(e){var t=e.data.code||200,o=e.data.msg,n=c[t]||c["default"];return"blob"===e.request.responseType||"arraybuffer"===e.request.responseType?e.data:401===t?(p.show||(p.show=!0,i["MessageBox"].confirm("登录状态已过期，您可以继续留在该页面，或者重新登录","系统提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){p.show=!1,s["a"].dispatch("LogOut").then((function(){location.href="/index"}))})).catch((function(){p.show=!1}))),Promise.reject("无效的会话，或者会话已过期，请重新登录。")):500===t?(Object(i["Message"])({message:n,type:"error"}),Promise.reject(new Error(n))):601===t?(Object(i["Message"])({message:n,type:"warning"}),Promise.reject("error")):200!==t?(i["Notification"].error({title:o}),Promise.reject("error")):e.data}),(function(e){console.log("err"+e);var t=e.message;return"Network Error"==t?t="后端接口连接异常":t.includes("timeout")?t="系统接口请求超时":t.includes("Request failed with status code")&&(t="系统接口"+t.substr(t.length-3)+"异常"),Object(i["Message"])({message:t,type:"error",duration:5e3}),Promise.reject(e)}));t["a"]=g},e2a7:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var n=o("5c96");function r(e,t){switch(t){case"warning":n["Message"].warning(e);break;case"error":n["Message"].error({message:e,duration:5e3,showClose:!0});break;case"info":n["Message"].info(e);break;default:n["Message"].success(e)}}}}]);