"use strict";(self["webpackChunksupermarket_manager"]=self["webpackChunksupermarket_manager"]||[]).push([[14],{14:function(e,t,r){r.r(t),r.d(t,{default:function(){return d}});var n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"sale_records"}},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",[e._v("首页")]),t("el-breadcrumb-item",[e._v("销售管理")]),t("el-breadcrumb-item",[e._v("积分兑换记录")])],1),t("br"),t("el-row",[t("el-col",{attrs:{span:7}},[t("el-input",{attrs:{placeholder:"兑换订单编号"},model:{value:e.searchForm.cn,callback:function(t){e.$set(e.searchForm,"cn",t)},expression:"searchForm.cn"}})],1),t("el-col",{attrs:{span:7}},[t("el-select",{attrs:{placeholder:"请选择会员账号",filterable:"",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.searchForm.memberId,callback:function(t){e.$set(e.searchForm,"memberId",t)},expression:"searchForm.memberId"}},e._l(e.options_memberPhone,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-col",{attrs:{span:10}},[t("span",[e._v("兑换时间：")]),t("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"起始时间"},model:{value:e.searchForm.startTime,callback:function(t){e.$set(e.searchForm,"startTime",t)},expression:"searchForm.startTime"}}),e._v(" - "),t("el-date-picker",{staticStyle:{width:"140px"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"结束时间"},model:{value:e.searchForm.endTime,callback:function(t){e.$set(e.searchForm,"endTime",t)},expression:"searchForm.endTime"}})],1)],1),t("br"),t("el-row",[t("el-col",{staticStyle:{"text-align":"left"},attrs:{span:24}},[t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"success"},on:{click:e.submitSearchForm}},[t("i",{staticClass:"iconfont icon-r-find",staticStyle:{"font-size":"18px"}}),e._v(" 搜索 ")])],1)],1),t("br"),t("div",{staticClass:"table"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"medium"}},[t("el-table-column",{attrs:{prop:"cn",width:"200",label:"编号"}}),t("el-table-column",{attrs:{prop:"goodsCoverUrl",label:"商品封面"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("img",{attrs:{src:e.BaseApi+r.row.goodsCoverUrl,alt:"兑换商品图片",height:"50px"}})]}}])}),t("el-table-column",{attrs:{prop:"goodsName",label:"商品"}}),t("el-table-column",{attrs:{prop:"integral",label:"积分"}}),t("el-table-column",{attrs:{width:"200",prop:"memberPhone",label:"会员账号"}}),t("el-table-column",{attrs:{prop:"updateTime",width:"200",label:"兑换时间"}}),t("el-table-column",{attrs:{prop:"updateby",label:"操作者"}}),t("el-table-column",{attrs:{width:"140",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"danger"},on:{click:function(t){return e.del(r.row.cn)}}},[t("i",{staticClass:"iconfont icon-r-delete",staticStyle:{"font-size":"18px"}}),e._v(" 删除 ")])]}}])})],1),t("div",{staticStyle:{margin:"10px 0 15px 0"}},[t("el-pagination",{attrs:{"current-page":e.searchForm.currentPage,"page-sizes":[5,10,20,50],"page-size":e.searchForm.pageSize,layout:"total,sizes, prev, pager, next,jumper",total:e.searchForm.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.searchForm,"currentPage",t)},"update:current-page":function(t){return e.$set(e.searchForm,"currentPage",t)}}})],1)],1)],1)},o=[],a=r(4464),i=r(4761),s={data(){return{BaseApi:this.$store.state.BaseApi,searchForm:{pageSize:5},tableData:[],options_memberPhone:[]}},methods:{queryOptionsMemberPhone(){(0,i.vC)().then((e=>{e=e.data,200==e.code?this.options_memberPhone=e.data:(0,a.lY)(e.msg,"error")}))},init(){this.searchForm.startTime>this.searchForm.endTime?(0,a.lY)("结束时间不能小于开始时间","warning"):(0,i.IK)(this.searchForm).then((e=>{e=e.data,200==e.code?(this.tableData=e.data.records,this.searchForm.total=e.data.total,this.searchForm.pageSize=e.data.size,this.searchForm.currentPage=e.data.current):(0,a.lY)(e.msg,"error")}))},del(e){this.$confirm("确定删除这条记录？","警示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,i.d9)({cn:e}).then((e=>{e=e.data,200==e.code?((0,a.lY)("操作成功"),this.init()):(0,a.lY)(e.msg,"error")}))})).catch((()=>{this.$message({type:"info",message:"已取消操作"})}))},handleSizeChange(e){this.searchForm.pageSize=e,this.init()},handleCurrentChange(e){this.searchForm.currentPage=e,this.init()},submitSearchForm(){this.init()}},mounted(){this.init(),this.queryOptionsMemberPhone()}},c=s,u=r(1656),l=(0,u.A)(c,n,o,!1,null,null,null),d=l.exports},4761:function(e,t,r){r.d(t,{$K:function(){return i},IK:function(){return l},IZ:function(){return a},LW:function(){return p},Tl:function(){return m},Uw:function(){return s},d9:function(){return d},mx:function(){return c},vC:function(){return u}});var n=r(4464);const o="/sale/pointRedemption";function a(e){return(0,n.hW)(o+"/queryPointProductBymemberId",e)}function i(e){return(0,n.hW)(o+"/queryMemberByGoodsId",e)}function s(e){return(0,n.hW)(o+"/queryPointProductByGoodsId",e)}function c(e){return(0,n.PP)(o+"/saveExchangePointProductRecords",e)}function u(){return(0,n.hW)(o+"/queryOptionsMemberPhone",{})}function l(e){return(0,n.PP)(o+"/queryPageByQoExchangePointProducts",e)}function d(e){return(0,n.hW)(o+"/delExchangePointProducts",e)}function p(){return(0,n.hW)(o+"/queryOptionsPointProducts",{})}function m(){return(0,n.hW)(o+"/queryOptionsMember",{})}},2399:function(e,t,r){r.d(t,{eF:function(){return i},gf:function(){return a},kD:function(){return s},o7:function(){return c}});var n=r(8987);const o="token";function a(){return n.A.get(o)}function i(){return n.A.remove(o)}function s(){let e=n.A.get("employee");return JSON.parse(e)}function c(e){n.A.remove(e)}},4464:function(e,t,r){r.d(t,{NY:function(){return p},PP:function(){return d},hW:function(){return m},lY:function(){return h}});var n=r(2399),o=r(4335),a=r(1052),i=r(8987),s=r(5373),c=r.n(s);const u="http://sun.ipyingshe.com";function l(){var e=(0,n.gf)();return e&&(0,o.A)({url:u+"/checkedToken",method:"GET",params:{token:e}}).then((e=>{e=e.data,200==e.code&&(i.A.set("token",e.data.token,{expires:1/48}),i.A.set("employee",JSON.stringify(e.data.employee),{expires:1/48}))})).catch((e=>{console.log(e)})),e}function d(e,t){return(0,o.A)({url:u+e,method:"POST",headers:{token:l()},data:c().stringify(t)}).catch((e=>{console.log(e),void 0==e.response||void 0==e.response.data?h(e,"error"):h(e.response.data,"error")}))}function p(e,t){return(0,o.A)({url:u+e,method:"POST",headers:{"Content-Type":"application/json",token:l()},data:t}).catch((e=>{console.log(e),void 0==e.response||void 0==e.response.data?h(e,"error"):h(e.response.data,"error")}))}function m(e,t){return(0,o.A)({url:u+e,method:"GET",headers:{token:l()},params:t}).catch((e=>{console.log(e),void 0==e.response||void 0==e.response.data?h(e,"error"):h(e.response.data,"error")}))}function h(e,t){switch(t){case"warning":a.Message.warning(e);break;case"error":a.Message.error({message:e,duration:5e3,showClose:!0});break;case"info":a.Message.info(e);break;default:a.Message.success(e)}}},8987:function(e,t,r){
/*! js-cookie v3.0.5 | MIT */
function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.d(t,{A:function(){return i}});var o={read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function a(e,t){function r(r,o,a){if("undefined"!==typeof document){a=n({},t,a),"number"===typeof a.expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),r=encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in a)a[s]&&(i+="; "+s,!0!==a[s]&&(i+="="+a[s].split(";")[0]));return document.cookie=r+"="+e.write(o,r)+i}}function o(t){if("undefined"!==typeof document&&(!arguments.length||t)){for(var r=document.cookie?document.cookie.split("; "):[],n={},o=0;o<r.length;o++){var a=r[o].split("="),i=a.slice(1).join("=");try{var s=decodeURIComponent(a[0]);if(n[s]=e.read(i,s),t===s)break}catch(c){}}return t?n[t]:n}}return Object.create({set:r,get:o,remove:function(e,t){r(e,"",n({},t,{expires:-1}))},withAttributes:function(e){return a(this.converter,n({},this.attributes,e))},withConverter:function(e){return a(n({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var i=a(o,{path:"/"})}}]);
//# sourceMappingURL=14.52ec0619.js.map