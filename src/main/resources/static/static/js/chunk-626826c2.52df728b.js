(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-626826c2"],{"5f87":function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return l}));a("b64b");var r=a("852e"),o=a.n(r),n="token";function s(){return o.a.get(n)}function i(){return o.a.remove(n)}function c(){var e=o.a.get("employee");return JSON.parse(e)}function l(e){o.a.remove(e)}},ac43:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("库存管理")]),a("el-breadcrumb-item",[e._v("库存统计")])],1),a("br"),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"仓库名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),a("el-col",{attrs:{span:16}},[a("i",{staticClass:"iconfont icon-r-add",staticStyle:{"font-size":"28px"}},[a("b",[e._v(" 总存储量："),a("span",{staticStyle:{color:"#fc4316"}},[e._v(e._s(e.totalStoreNum?e.totalStoreNum:0)+"件")])])])])],1),a("br"),a("el-row",[a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:24}},[a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:e.submitSearchForm}},[a("i",{staticClass:"iconfont icon-r-find",staticStyle:{"font-size":"18px"}}),e._v(" 搜索 ")])],1)],1),a("br"),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"medium"}},[a("el-table-column",{attrs:{type:"index",width:"200",label:"序号"}}),a("el-table-column",{attrs:{prop:"storeName","show-overflow-tooltip":!0,label:"仓库名"}}),a("el-table-column",{attrs:{prop:"residueNum","show-overflow-tooltip":!0,label:"存货数量"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:function(a){return e.detailStoreBtn(t.row)}}},[a("i",{staticClass:"iconfont icon-r-find",staticStyle:{"font-size":"18px"}}),e._v(" 存储明细 ")])]}}])})],1),a("div",{staticStyle:{margin:"10px 0 15px 0"}},[a("el-pagination",{attrs:{"current-page":e.searchForm.currentPage,"page-sizes":[5,10,20,50],"page-size":e.searchForm.pageSize,layout:"total,sizes, prev, pager, next,jumper",total:e.searchForm.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.searchForm,"currentPage",t)},"update:current-page":function(t){return e.$set(e.searchForm,"currentPage",t)}}})],1)],1),a("el-dialog",{attrs:{title:"仓库存储明细",visible:e.detailStoreVisible,width:"95%",height:"100%"},on:{"update:visible":function(t){e.detailStoreVisible=t}}},[a("el-row",[a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[a("el-select",{attrs:{placeholder:"请选择商品",filterable:"",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.searchDetailForm.id,callback:function(t){e.$set(e.searchDetailForm,"id",t)},expression:"searchDetailForm.id"}},e._l(e.options_storeGoods,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-col",{attrs:{span:8}},[a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"success"},on:{click:e.submitDetailSearchForm}},[a("i",{staticClass:"iconfont icon-r-find",staticStyle:{"font-size":"18px"}}),e._v(" 搜索 ")]),a("el-button",{staticStyle:{"font-size":"18px"},on:{click:e.closeDetailStoreVisible}},[a("i",{staticClass:"iconfont icon-r-no",staticStyle:{"font-size":"18px"}}),e._v(" 关闭 ")])],1),a("el-col",{attrs:{span:8}},[a("i",{staticClass:"iconfont icon-r-add",staticStyle:{"font-size":"28px"}},[a("b",[e._v(" 总存储量："),a("span",{staticStyle:{color:"#fc4316"}},[e._v(e._s(e.totalStoreNum1?e.totalStoreNum1:0)+"件")])])])])],1),a("br"),a("div",{staticClass:"table",staticStyle:{overflow:"auto",height:"300px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData1,size:"medium"}},[a("el-table-column",{attrs:{type:"index",width:"200",label:"序号"}}),a("el-table-column",{attrs:{prop:"goodsName","show-overflow-tooltip":!0,label:"商品名"}}),a("el-table-column",{attrs:{prop:"residueNum","show-overflow-tooltip":!0,label:"商品数量"}}),a("el-table-column",{attrs:{prop:"percentage","show-overflow-tooltip":!0,label:"占总存储量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-progress",{attrs:{type:"circle",width:"70",percentage:t.row.percentage,color:e.customColorMethod}})]}}])})],1),a("div",{staticStyle:{margin:"10px 0 15px 0"}},[a("el-pagination",{attrs:{"current-page":e.searchDetailForm.currentPage,"page-sizes":[5,10,20,50],"page-size":e.searchDetailForm.pageSize,layout:"total,sizes, prev, pager, next,jumper",total:e.searchDetailForm.total},on:{"size-change":e.handleSizeChange1,"current-change":e.handleCurrentChange1,"update:currentPage":function(t){return e.$set(e.searchDetailForm,"currentPage",t)},"update:current-page":function(t){return e.$set(e.searchDetailForm,"currentPage",t)}}})],1)],1)],1)],1)},o=[],n=(a("e2a7"),a("b775")),s="/inventory/stock/statistic";function i(e){return Object(n["a"])({url:s+"/queryPageByQo",method:"post",data:e})}function c(e){return Object(n["a"])({url:s+"/queryStoreGoodsByStoreId",method:"post",data:e})}var l={data:function(){return{tableData:[],tableData1:[],totalStoreNum:"",totalStoreNum1:"",searchForm:{total:0,currentPage:1,pageSize:5},searchDetailForm:{total:0,currentPage:1,pageSize:10},options_storeGoods:[],detailStoreVisible:!1}},methods:{init:function(){var e=this;i(this.searchForm).then((function(t){200===t.code&&(e.totalStoreNum=t.data.totalStoreNum,e.tableData=t.data.page.records,e.searchForm.total=t.data.page.total,e.searchForm.pageSize=t.data.page.size,e.searchForm.currentPage=t.data.page.current)}))},handleSizeChange:function(e){this.searchForm.pageSize=e,this.init(),console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){this.searchForm.currentPage=e,this.init(),console.log("当前页: ".concat(e))},submitSearchForm:function(){this.init()},init1:function(){var e=this;c(this.searchDetailForm).then((function(t){200===t.code&&(e.options_storeGoods=t.data.optionsStoreGoods,e.totalStoreNum1=t.data.totalStoreNum1,e.tableData1=t.data.vos.records,e.searchDetailForm.total=t.data.vos.total,e.searchDetailForm.pageSize=t.data.vos.size,e.searchDetailForm.currentPage=t.data.vos.current,e.detailStoreVisible=!0)}))},detailStoreBtn:function(e){this.options_storeGoods=[],this.totalStoreNum1="",this.searchDetailForm.storeId=e.storeId,this.init1()},handleSizeChange1:function(e){this.searchDetailForm.pageSize=e,this.init1(),console.log("每页 ".concat(e," 条"))},handleCurrentChange1:function(e){this.searchDetailForm.currentPage=e,this.init1(),console.log("当前页: ".concat(e))},submitDetailSearchForm:function(){this.init1()},customColorMethod:function(e){return e<30?"#f56c6c":e<70?"#e6a23c":"#67c23a"},closeDetailStoreVisible:function(){this.searchDetailForm={total:0,currentPage:1,pageSize:10},this.detailStoreVisible=!1}},mounted:function(){this.init()}},u=l,d=(a("d556"),a("2877")),f=Object(d["a"])(u,r,o,!1,null,null,null);t["default"]=f.exports},b775:function(e,t,a){"use strict";a("c7eb"),a("1da1"),a("5530");var r=a("53ca"),o=(a("d9e2"),a("caad"),a("fb6a"),a("e9c4"),a("b64b"),a("d3b7"),a("2532"),a("bc3a")),n=a.n(o),s=a("5c96"),i=a("4360"),c=a("5f87"),l={401:"认证失败，无法访问系统资源",403:"当前操作没有权限",404:"访问资源不存在",default:"系统未知错误，请反馈给管理员"};a("b85c"),a("a15b"),a("14d9"),a("4d63"),a("c607"),a("ac1f"),a("2c3e"),a("00b4"),a("25f0"),a("5319"),a("1276");function u(e){for(var t="",a=0,o=Object.keys(e);a<o.length;a++){var n=o[a],s=e[n],i=encodeURIComponent(n)+"=";if(null!==s&&""!==s&&"undefined"!==typeof s)if("object"===Object(r["a"])(s))for(var c=0,l=Object.keys(s);c<l.length;c++){var u=l[c];if(null!==s[u]&&""!==s[u]&&"undefined"!==typeof s[u]){var d=n+"["+u+"]",f=encodeURIComponent(d)+"=";t+=f+encodeURIComponent(s[u])+"&"}}else t+=i+encodeURIComponent(s)+"&"}return t}var d={set:function(e,t){sessionStorage&&null!=e&&null!=t&&sessionStorage.setItem(e,t)},get:function(e){return sessionStorage?null==e?null:sessionStorage.getItem(e):null},setJSON:function(e,t){null!=t&&this.set(e,JSON.stringify(t))},getJSON:function(e){var t=this.get(e);if(null!=t)return JSON.parse(t)},remove:function(e){sessionStorage.removeItem(e)}},f={set:function(e,t){localStorage&&null!=e&&null!=t&&localStorage.setItem(e,t)},get:function(e){return localStorage?null==e?null:localStorage.getItem(e):null},setJSON:function(e,t){null!=t&&this.set(e,JSON.stringify(t))},getJSON:function(e){var t=this.get(e);if(null!=t)return JSON.parse(t)},remove:function(e){localStorage.removeItem(e)}},m={session:d,local:f},p=(a("21a6"),{show:!1});n.a.defaults.headers["Content-Type"]="application/json;charset=utf-8";var h=n.a.create({baseURL:"/",timeout:1e4});h.interceptors.request.use((function(e){var t=!1===(e.headers||{}).isToken,a=!1===(e.headers||{}).repeatSubmit;if(Object(c["b"])()&&!t&&(e.headers["token"]=Object(c["b"])()),"get"===e.method&&e.params){var o=e.url+"?"+u(e.params);o=o.slice(0,-1),e.params={},e.url=o}if(!a&&("post"===e.method||"put"===e.method)){var n={url:e.url,data:"object"===Object(r["a"])(e.data)?JSON.stringify(e.data):e.data,time:(new Date).getTime()},s=m.session.getJSON("sessionObj");if(void 0===s||null===s||""===s)m.session.setJSON("sessionObj",n);else{var i=s.url,l=s.data,d=s.time,f=1e3;if(l===n.data&&n.time-d<f&&i===n.url){var p="数据正在处理，请勿重复提交";return console.warn("[".concat(i,"]: ")+p),Promise.reject(new Error(p))}m.session.setJSON("sessionObj",n)}}return e}),(function(e){console.log(e),Promise.reject(e)})),h.interceptors.response.use((function(e){var t=e.data.code||200,a=e.data.msg,r=l[t]||l["default"];return"blob"===e.request.responseType||"arraybuffer"===e.request.responseType?e.data:401===t?(p.show||(p.show=!0,s["MessageBox"].confirm("登录状态已过期，您可以继续留在该页面，或者重新登录","系统提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){p.show=!1,i["a"].dispatch("LogOut").then((function(){location.href="/index"}))})).catch((function(){p.show=!1}))),Promise.reject("无效的会话，或者会话已过期，请重新登录。")):500===t?(Object(s["Message"])({message:r,type:"error"}),Promise.reject(new Error(r))):601===t?(Object(s["Message"])({message:r,type:"warning"}),Promise.reject("error")):200!==t?(s["Notification"].error({title:a}),Promise.reject("error")):e.data}),(function(e){console.log("err"+e);var t=e.message;return"Network Error"==t?t="后端接口连接异常":t.includes("timeout")?t="系统接口请求超时":t.includes("Request failed with status code")&&(t="系统接口"+t.substr(t.length-3)+"异常"),Object(s["Message"])({message:t,type:"error",duration:5e3}),Promise.reject(e)}));t["a"]=h},cf71:function(e,t,a){},d556:function(e,t,a){"use strict";a("cf71")},e2a7:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a("5c96");function o(e,t){switch(t){case"warning":r["Message"].warning(e);break;case"error":r["Message"].error({message:e,duration:5e3,showClose:!0});break;case"info":r["Message"].info(e);break;default:r["Message"].success(e)}}}}]);