(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25389d72"],{"03d9":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"employee_index"}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("人事管理")]),a("el-breadcrumb-item",[e._v("员工管理")])],1),a("br"),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-input",{staticStyle:{width:"95%"},attrs:{placeholder:"用户名"},model:{value:e.searchForm.username,callback:function(t){e.$set(e.searchForm,"username",t)},expression:"searchForm.username"}})],1),a("el-col",{attrs:{span:8}},[a("el-input",{staticStyle:{width:"95%"},attrs:{placeholder:"姓名"},model:{value:e.searchForm.nickName,callback:function(t){e.$set(e.searchForm,"nickName",t)},expression:"searchForm.nickName"}})],1),a("el-col",{attrs:{span:8}},[a("el-input",{staticStyle:{width:"95%"},attrs:{type:"number",min:0,max:100,placeholder:"年龄"},model:{value:e.searchForm.age,callback:function(t){e.$set(e.searchForm,"age",t)},expression:"searchForm.age"}})],1)],1),a("br"),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"97%"},attrs:{placeholder:"住址"},model:{value:e.searchForm.address,callback:function(t){e.$set(e.searchForm,"address",t)},expression:"searchForm.address"}})],1),a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{placeholder:"性别",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.searchForm.sex,callback:function(t){e.$set(e.searchForm,"sex",t)},expression:"searchForm.sex"}},[a("el-option",{attrs:{label:"女",value:"0"}}),a("el-option",{attrs:{label:"男",value:"1"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{placeholder:"部门",filterable:"",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.searchForm.deptId,callback:function(t){e.$set(e.searchForm,"deptId",t)},expression:"searchForm.deptId"}},e._l(e.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("br"),a("el-row",[a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:24}},[a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:e.submitSearchForm}},[a("i",{staticClass:"iconfont icon-r-find",staticStyle:{"font-size":"18px"}}),e._v("搜索 ")]),a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"success"},on:{click:function(t){e.newVisable=!0}}},[a("i",{staticClass:"iconfont icon-r-add",staticStyle:{"font-size":"18px"}}),e._v(" 新建员工 ")])],1)],1),a("br"),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"medium"}},[a("el-table-column",{attrs:{prop:"username",width:"130",label:"用户名"}}),a("el-table-column",{attrs:{width:"100",prop:"nickName",label:"姓名"}}),a("el-table-column",{attrs:{width:"50",prop:"sex",label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("1"==t.row.sex?"男":"女")+" ")]}}])}),a("el-table-column",{attrs:{width:"50",prop:"age",label:"年龄"}}),a("el-table-column",{attrs:{width:"130","show-overflow-tooltip":!0,prop:"address",label:"住址"}}),a("el-table-column",{attrs:{width:"130","show-overflow-tooltip":!0,prop:"deptName",label:"所属部门"}}),a("el-table-column",{attrs:{width:"120","show-overflow-tooltip":!0,prop:"createTime",label:"入职时间"}}),a("el-table-column",{attrs:{width:"120","show-overflow-tooltip":!0,prop:"leaveTime",label:"离职时间"}}),a("el-table-column",{attrs:{width:"120",prop:"state",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.state?a("el-tag",{attrs:{type:"success"}},[e._v("在职 ")]):a("el-tag",{attrs:{type:"danger"}},[e._v("离职")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"570",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"primary"},on:{click:function(a){return e.detailBtn(t.row)}}},[a("i",{staticClass:"iconfont icon-r-find",staticStyle:{"font-size":"16px"}}),e._v(" 详情 ")]),a("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"success"},on:{click:function(a){return e.editBtn(t.row.id)}}},[a("i",{staticClass:"iconfont icon-r-edit",staticStyle:{"font-size":"16px"}}),e._v(" 修改 ")]),a("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"danger"},on:{click:function(a){return e.delBtn(t.row)}}},[a("i",{staticClass:"iconfont icon-r-delete",staticStyle:{"font-size":"16px"}}),e._v(" 删除 ")]),a("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"warning"},on:{click:function(a){return e.empRoleBtn(t.row.id)}}},[a("i",{staticClass:"iconfont icon-r-user1",staticStyle:{"font-size":"16px"}}),e._v("职务 ")]),a("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"warning"},on:{click:function(a){return e.resetPwd(t.row)}}},[a("i",{staticClass:"iconfont icon-r-lock",staticStyle:{"font-size":"16px"}}),e._v(" 重置密码 ")])]}}])})],1),a("div",{staticStyle:{margin:"10px 0 15px 0"}},[a("el-pagination",{attrs:{"current-page":e.searchForm.currentPage,"page-sizes":[5,10,20,50],"page-size":e.searchForm.pageSize,layout:"total,sizes, prev, pager, next,jumper",total:e.searchForm.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.searchForm,"currentPage",t)},"update:current-page":function(t){return e.$set(e.searchForm,"currentPage",t)}}})],1)],1),a("el-dialog",{attrs:{visible:e.detailVisable,width:"50%"},on:{"update:visible":function(t){e.detailVisable=t}}},[a("el-descriptions",{attrs:{model:e.detailForm,column:"2",title:"员工信息"}},[a("el-descriptions-item",{attrs:{label:"用户名"}},[e._v(e._s(e.detailForm.username)+" ")]),a("el-descriptions-item",{attrs:{label:"性别"}},[e._v(e._s("1"==e.detailForm.sex?"男":"女")+" ")]),a("el-descriptions-item",{attrs:{label:"年龄"}},[e._v(e._s(e.detailForm.age)+" ")]),a("el-descriptions-item",{attrs:{label:"住址"}},[e._v(e._s(e.detailForm.address)+" ")]),a("el-descriptions-item",{attrs:{label:"昵称"}},[e._v(e._s(e.detailForm.nickName)+" ")]),a("el-descriptions-item",{attrs:{label:"头像"}},[a("img",{attrs:{src:e.BaseApi+e.detailForm.headImg,width:"30px"}})]),a("el-descriptions-item",{attrs:{label:"状态"}},["0"==e.detailForm.state?a("el-tag",{attrs:{type:"success"}},[e._v("在职 ")]):a("el-tag",{attrs:{type:"danger"}},[e._v("离职")])],1),a("el-descriptions-item",{attrs:{label:"系统管理员"}},[1==e.detailForm.isAdmin?a("el-tag",{attrs:{type:"success"}},[e._v("是 ")]):a("el-tag",{attrs:{type:"danger"}},[e._v("否")])],1),a("el-descriptions-item",{attrs:{label:"描述"}}),a("el-descriptions-item",{attrs:{label:"录入者"}},[e._v(e._s(e.detailForm.createby)+" ")]),a("el-descriptions-item",{attrs:{label:"所属部门"}},[e.detailForm.deptName?a("el-tag",{attrs:{type:"warning"}},[e._v(e._s(e.detailForm.deptName)+" ")]):e._e()],1),a("el-descriptions-item",{attrs:{label:"身份证号"}},[e._v(e._s(e.detailForm.idCard)+" ")]),a("el-descriptions-item",{attrs:{label:"入职时间"}},[e._v(e._s(e.detailForm.createTime)+" ")]),"0"!=e.detailForm.state?a("el-descriptions-item",{attrs:{label:"离职时间"}},[e._v(e._s(e.detailForm.leaveTime)+" ")]):e._e(),a("el-descriptions-item",{attrs:{label:"角色"}},[a("div",{staticStyle:{"flex-wrap":"wrap",display:"flex"}},e._l(e.detailForm.roleNames,(function(t){return a("el-tag",{key:t.id,attrs:{size:"mini",type:"success"}},[e._v(e._s(t)+" ")])})),1)])],1),a("el-button",{attrs:{type:"info"},on:{click:e.detail_down}},[e._v("关闭")])],1),a("el-dialog",{attrs:{title:"录入用户",visible:e.newVisable,size:"mini","label-width":"200",width:"50%"},on:{"update:visible":function(t){e.newVisable=t},close:e.dialog_imgClose}},[a("el-form",{ref:"newForm",staticClass:"demo-ruleForm",attrs:{model:e.newForm,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"头像："}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.BaseApi+"/personnel_management/employee/uploadImg","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.BaseApi+e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电话号码：",prop:"username"}},[a("el-input",{attrs:{max:"11"},model:{value:e.newForm.username,callback:function(t){e.$set(e.newForm,"username",t)},expression:"newForm.username"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名：",prop:"nickName"}},[a("el-input",{model:{value:e.newForm.nickName,callback:function(t){e.$set(e.newForm,"nickName",t)},expression:"newForm.nickName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证号：",prop:"idCard"}},[a("el-input",{model:{value:e.newForm.idCard,callback:function(t){e.$set(e.newForm,"idCard",t)},expression:"newForm.idCard"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"年龄："}},[a("el-input",{attrs:{type:"number",min:"18",max:"70"},model:{value:e.newForm.age,callback:function(t){e.$set(e.newForm,"age",t)},expression:"newForm.age"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属部门："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择部门",filterable:"",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.newForm.deptId,callback:function(t){e.$set(e.newForm,"deptId",t)},expression:"newForm.deptId"}},e._l(e.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"住址："}},[a("el-input",{attrs:{type:"text"},model:{value:e.newForm.address,callback:function(t){e.$set(e.newForm,"address",t)},expression:"newForm.address"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"员工备注："}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newForm.info,expression:"newForm.info"}],attrs:{cols:"20",rows:"3"},domProps:{value:e.newForm.info},on:{input:function(t){t.target.composing||e.$set(e.newForm,"info",t.target.value)}}})])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择性别",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.newForm.sex,callback:function(t){e.$set(e.newForm,"sex",t)},expression:"newForm.sex"}},[a("el-option",{attrs:{label:"女",value:"0"}}),a("el-option",{attrs:{label:"男",value:"1"}})],1)],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitNewForm("newForm")}}},[e._v("提交 ")]),a("el-button",{on:{click:e.saveCancel}},[e._v("取消")])],1)],1)],1),a("el-dialog",{attrs:{title:"修改员工",visible:e.editVisable,size:"mini","label-width":"200",width:"50%"},on:{close:e.dialog_imgClose,"update:visible":function(t){e.editVisable=t}}},[a("el-form",{ref:"editForm",staticClass:"demo-ruleForm",attrs:{model:e.editForm,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"头像："}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.BaseApi+"/personnel_management/employee/uploadImg","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.BaseApi+e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电话号码：",prop:"username"}},[a("el-input",{attrs:{max:"11"},model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名：",prop:"nickName"}},[a("el-input",{model:{value:e.editForm.nickName,callback:function(t){e.$set(e.editForm,"nickName",t)},expression:"editForm.nickName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证号：",prop:"idCard"}},[a("el-input",{model:{value:e.editForm.idCard,callback:function(t){e.$set(e.editForm,"idCard",t)},expression:"editForm.idCard"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"年龄："}},[a("el-input",{attrs:{type:"number",min:"18",max:"70"},model:{value:e.editForm.age,callback:function(t){e.$set(e.editForm,"age",t)},expression:"editForm.age"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属部门："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择部门",filterable:"",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.editForm.deptId,callback:function(t){e.$set(e.editForm,"deptId",t)},expression:"editForm.deptId"}},e._l(e.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"住址："}},[a("el-input",{attrs:{type:"text"},model:{value:e.editForm.address,callback:function(t){e.$set(e.editForm,"address",t)},expression:"editForm.address"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"员工备注："}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editForm.info,expression:"editForm.info"}],attrs:{cols:"20",rows:"3"},domProps:{value:e.editForm.info},on:{input:function(t){t.target.composing||e.$set(e.editForm,"info",t.target.value)}}})])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择性别",clearable:""},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.editForm.sex,callback:function(t){e.$set(e.editForm,"sex",t)},expression:"editForm.sex"}},[a("el-option",{attrs:{label:"女",value:"0"}}),a("el-option",{attrs:{label:"男",value:"1"}})],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"状态："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择状态",clearable:""},model:{value:e.editForm.state,callback:function(t){e.$set(e.editForm,"state",t)},expression:"editForm.state"}},[a("el-option",{attrs:{label:"在职",value:"0"}}),a("el-option",{attrs:{label:"离职",value:"1"}})],1)],1)],1)],1),a("el-form-item",[a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:function(t){return e.submitEditForm("editForm")}}},[a("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"18px"}}),e._v(" 提交 ")]),a("el-button",{staticStyle:{"font-size":"18px"},on:{click:e.editCancel}},[e._v("取消")])],1)],1)],1),a("el-dialog",{attrs:{title:"分配职务",visible:e.empRoleVisable},on:{"update:visible":function(t){e.empRoleVisable=t}}},[a("div",[a("label",[e._v("已有职务：")]),a("el-select",{attrs:{disabled:"",size:"small",multiple:!0,filterable:"",placeholder:"没有职务"},model:{value:e.hasRoleIds,callback:function(t){e.hasRoleIds=t},expression:"hasRoleIds"}},e._l(e.allRoles,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("div",[a("label",[e._v("更改职务：")]),a("el-select",{attrs:{size:"small",name:"roleIds",multiple:!0,filterable:"",placeholder:"请选择职务"},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.empRoleForm.empRoleIds,callback:function(t){e.$set(e.empRoleForm,"empRoleIds",t)},expression:"empRoleForm.empRoleIds"}},e._l(e.allRoles,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("br"),a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:e.submitRoleBtn}},[a("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"18px"}}),e._v(" 提交 ")]),a("el-button",{staticStyle:{"font-size":"18px"},on:{click:e.roleBtnCancel}},[e._v("取消")])],1),a("el-dialog",{attrs:{title:"重置密码",visible:e.resetPwdVisable},on:{"update:visible":function(t){e.resetPwdVisable=t}},model:{value:e.resetPwdForm,callback:function(t){e.resetPwdForm=t},expression:"resetPwdForm"}},[a("el-form",[a("el-form-item",{attrs:{label:"密码："}},[a("el-input",{staticStyle:{width:"75%",margin:"0 auto",padding:"0"},attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.resetPwdForm.code,callback:function(t){e.$set(e.resetPwdForm,"code",t)},expression:"resetPwdForm.code"}})],1),a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:e.submitResetPwd}},[a("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"18px"}}),e._v(" 确定 ")]),a("el-button",{staticStyle:{"font-size":"18px"},on:{click:function(t){e.resetPwdVisable=!1}}},[e._v("取消")])],1)],1)],1)},o=[],s=a("5530"),n=(a("14d9"),a("e9c4"),a("d3b7"),a("25f0"),a("16c7")),l=a("e2a7"),i=a("d3d1"),c=a("48cf"),d=a("5f87"),u={data:function(){return{BaseApi:this.$store.state.BaseApi,detailVisable:!1,newVisable:!1,editVisable:!1,empRoleForm:{},hasRoleIds:[],allRoles:[],detailForm:{},searchForm:{},editForm:{},options:[],tableData:[],resetPwdVisable:!1,newForm:{},empRoleVisable:!1,checked_keys:[],roles:[],resetPwdForm:{},rules:{username:[{required:!0,message:"手机号不能为空",trigger:"blur"}],nickName:[{required:!0,message:"姓名不能为空",trigger:"blur"}],idCard:[{required:!0,message:"身份证号不能为空",trigger:"blur"}]},imageUrl:""}},methods:{deptAll:function(){var e=this;Object(n["b"])({}).then((function(t){200===t.code&&(e.options=t.data)}))},getRoleAll:function(){var e=this;Object(c["d"])().then((function(t){200===t.code&&(e.allRoles=t.data)}))},init:function(){var e=this;Object(i["d"])(this.searchForm).then((function(t){200===t.code&&(e.tableData=t.data.records,e.searchForm.total=t.data.total,e.searchForm.pageSize=t.data.size,e.searchForm.currentPage=t.data.current)}))},handleSizeChange:function(e){this.searchForm.pageSize=e,this.init(),console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){this.searchForm.currentPage=e,this.init(),console.log("当前页: ".concat(e))},submitSearchForm:function(){this.init()},detailBtn:function(e){var t=this;Object(i["b"])(e.id).then((function(a){200===a.code&&(t.detailForm=a.data,t.detailForm.deptName=e.deptName,t.detailVisable=!0)})),console.log(this.detailForm)},detail_down:function(){this.detailForm={},this.detailVisable=!1},handleAvatarSuccess:function(e){this.imageUrl=e.url},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<3;return t||this.$message.error("上传头像图片只能是 JPG或PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 3MB!"),t&&a},submitNewForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.newForm.headImg=t.imageUrl,Object(i["f"])(t.newForm).then((function(e){200===e.code&&(Object(l["a"])("操作成功"),t.newForm={},t.imageUrl="",t.newVisable=!1,t.init())})))}))},saveCancel:function(){this.newVisable=!1,this.imageUrl="",this.$refs["newForm"].resetFields()},editCancel:function(){this.editVisable=!1,this.imageUrl="",this.$refs["editForm"].resetFields(),this.editForm={}},editBtn:function(e){var t=this;Object(i["c"])(e).then((function(e){200===e.code&&(t.editForm=Object(s["a"])({},e.data),console.log(t.editForm),t.imageUrl=t.editForm.headImg,t.editVisable=!0)}))},submitEditForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.editForm.headImg=t.imageUrl,Object(i["g"])(t.editForm).then((function(e){200===e.code&&(Object(l["a"])("操作成功"),t.editForm={},t.imageUrl="",t.editVisable=!1,t.init())})))}))},delBtn:function(e){var t=this;this.$confirm("确定要将该员工办理离职?","警示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){"1"!=e.state?Object(i["a"])(e.id).then((function(e){200===e.code&&(Object(l["a"])("操作成功"),t.init())})):Object(l["a"])("已是离职状态","warning")})).catch((function(){t.$message({type:"info",message:"已取消操作"})}))},dialog_imgClose:function(){this.imageUrl=""},empRoleBtn:function(e){var t=this;this.empRoleForm.eid=e,Object(c["e"])(e).then((function(e){200===e.code&&(t.empRoleForm.empRoleIds=e.data,t.hasRoleIds=e.data,t.empRoleVisable=!0)})),this.empRoleVisable=!0},submitRoleBtn:function(){var e=this;JSON.stringify(this.hasRoleIds)===JSON.stringify(this.empRoleForm.empRoleIds)?Object(l["a"])("你未做改动...","warning"):this.$confirm("确定修改员工的职务?","警示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.empRoleForm.empRoleIds=e.empRoleForm.empRoleIds.toString(),Object(c["h"])(e.empRoleForm).then((function(t){200===t.code?(Object(l["a"])("操作成功"),e.hasRoleIds=[],e.empRoleForm={},e.empRoleVisable=!1):e.empRoleForm.empRoleIds=e.hasRoleIds}))})).catch((function(){e.$message({type:"info",message:"已取消操作"})}))},roleBtnCancel:function(){this.empRoleVisable=!1,this.hasRoleIds=[],this.empRoleIds=[]},resetPwd:function(e){this.resetPwdForm={},this.resetPwdForm.eid=e.id,this.resetPwdVisable=!0},submitResetPwd:function(){var e=this;this.$confirm("确定要重置该账户的密码?","警示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["e"])(e.resetPwdForm).then((function(t){if(200===t.code){e.resetPwdVisable=!1;var a=Object(d["c"])();a.id==e.resetPwdForm.eid&&(Object(d["a"])("employee"),Object(d["a"])("token"),e.$router.push("/")),e.resetPwdForm={},Object(l["a"])("密码重置成功")}}))})).catch((function(){e.$message({type:"info",message:"已取消操作"})}))}},mounted:function(){this.deptAll(),this.getRoleAll(),this.init()}},m=u,p=(a("875f"),a("2877")),f=Object(p["a"])(m,r,o,!1,null,null,null);t["default"]=f.exports},"16c7":function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return i}));var r=a("b775"),o="/person/dept";function s(e){return Object(r["a"])({url:o+"/list",method:"get",params:e})}function n(e){return Object(r["a"])({url:o+"/save",method:"post",data:e})}function l(e){return Object(r["a"])({url:o+"/update",method:"post",data:e})}function i(e){return Object(r["a"])({url:o+"/deactivate",method:"post",data:{id:e}})}},"48cf":function(e,t,a){"use strict";a.d(t,"f",(function(){return s})),a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return l})),a.d(t,"g",(function(){return i})),a.d(t,"a",(function(){return c})),a.d(t,"i",(function(){return d})),a.d(t,"d",(function(){return u})),a.d(t,"h",(function(){return m})),a.d(t,"e",(function(){return p}));var r=a("b775"),o="/system/role";function s(e){return Object(r["a"])({url:o+"/list",method:"post",data:e})}function n(e){return Object(r["a"])({url:o+"/forbiddenRole",method:"post",data:{rid:e}})}function l(e){return Object(r["a"])({url:o+"/edit_role",method:"post",data:e})}function i(e){return Object(r["a"])({url:o+"/save",method:"post",data:e})}function c(e){return Object(r["a"])({url:o+"/checkPermissions",method:"get",params:{rid:e}})}function d(e){return Object(r["a"])({url:o+"/saveRolePermissions",method:"post",data:e})}function u(){return Object(r["a"])({url:o+"/all",method:"get"})}function m(e){return Object(r["a"])({url:o+"/saveRoleEmp",method:"post",data:e})}function p(e){return Object(r["a"])({url:o+"/queryRoleIdsByEid",method:"get",params:{eid:e}})}},"50a3":function(e,t,a){},"5f87":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return c}));a("b64b");var r=a("852e"),o=a.n(r),s="token";function n(){return o.a.get(s)}function l(){return o.a.remove(s)}function i(){var e=o.a.get("employee");return JSON.parse(e)}function c(e){o.a.remove(e)}},"875f":function(e,t,a){"use strict";a("50a3")},b775:function(e,t,a){"use strict";a("c7eb"),a("1da1"),a("5530");var r=a("53ca"),o=(a("d9e2"),a("caad"),a("fb6a"),a("e9c4"),a("b64b"),a("d3b7"),a("2532"),a("bc3a")),s=a.n(o),n=a("5c96"),l=a("4360"),i=a("5f87"),c={401:"认证失败，无法访问系统资源",403:"当前操作没有权限",404:"访问资源不存在",default:"系统未知错误，请反馈给管理员"};a("b85c"),a("a15b"),a("14d9"),a("4d63"),a("c607"),a("ac1f"),a("2c3e"),a("00b4"),a("25f0"),a("5319"),a("1276");function d(e){for(var t="",a=0,o=Object.keys(e);a<o.length;a++){var s=o[a],n=e[s],l=encodeURIComponent(s)+"=";if(null!==n&&""!==n&&"undefined"!==typeof n)if("object"===Object(r["a"])(n))for(var i=0,c=Object.keys(n);i<c.length;i++){var d=c[i];if(null!==n[d]&&""!==n[d]&&"undefined"!==typeof n[d]){var u=s+"["+d+"]",m=encodeURIComponent(u)+"=";t+=m+encodeURIComponent(n[d])+"&"}}else t+=l+encodeURIComponent(n)+"&"}return t}var u={set:function(e,t){sessionStorage&&null!=e&&null!=t&&sessionStorage.setItem(e,t)},get:function(e){return sessionStorage?null==e?null:sessionStorage.getItem(e):null},setJSON:function(e,t){null!=t&&this.set(e,JSON.stringify(t))},getJSON:function(e){var t=this.get(e);if(null!=t)return JSON.parse(t)},remove:function(e){sessionStorage.removeItem(e)}},m={set:function(e,t){localStorage&&null!=e&&null!=t&&localStorage.setItem(e,t)},get:function(e){return localStorage?null==e?null:localStorage.getItem(e):null},setJSON:function(e,t){null!=t&&this.set(e,JSON.stringify(t))},getJSON:function(e){var t=this.get(e);if(null!=t)return JSON.parse(t)},remove:function(e){localStorage.removeItem(e)}},p={session:u,local:m},f=(a("21a6"),{show:!1});s.a.defaults.headers["Content-Type"]="application/json;charset=utf-8";var b=s.a.create({baseURL:"/",timeout:1e4});b.interceptors.request.use((function(e){var t=!1===(e.headers||{}).isToken,a=!1===(e.headers||{}).repeatSubmit;if(Object(i["b"])()&&!t&&(e.headers["token"]=Object(i["b"])()),"get"===e.method&&e.params){var o=e.url+"?"+d(e.params);o=o.slice(0,-1),e.params={},e.url=o}if(!a&&("post"===e.method||"put"===e.method)){var s={url:e.url,data:"object"===Object(r["a"])(e.data)?JSON.stringify(e.data):e.data,time:(new Date).getTime()},n=p.session.getJSON("sessionObj");if(void 0===n||null===n||""===n)p.session.setJSON("sessionObj",s);else{var l=n.url,c=n.data,u=n.time,m=1e3;if(c===s.data&&s.time-u<m&&l===s.url){var f="数据正在处理，请勿重复提交";return console.warn("[".concat(l,"]: ")+f),Promise.reject(new Error(f))}p.session.setJSON("sessionObj",s)}}return e}),(function(e){console.log(e),Promise.reject(e)})),b.interceptors.response.use((function(e){var t=e.data.code||200,a=e.data.msg,r=c[t]||c["default"];return"blob"===e.request.responseType||"arraybuffer"===e.request.responseType?e.data:401===t?(f.show||(f.show=!0,n["MessageBox"].confirm("登录状态已过期，您可以继续留在该页面，或者重新登录","系统提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){f.show=!1,l["a"].dispatch("LogOut").then((function(){location.href="/index"}))})).catch((function(){f.show=!1}))),Promise.reject("无效的会话，或者会话已过期，请重新登录。")):500===t?(Object(n["Message"])({message:r,type:"error"}),Promise.reject(new Error(r))):601===t?(Object(n["Message"])({message:r,type:"warning"}),Promise.reject("error")):200!==t?(n["Notification"].error({title:a}),Promise.reject("error")):e.data}),(function(e){console.log("err"+e);var t=e.message;return"Network Error"==t?t="后端接口连接异常":t.includes("timeout")?t="系统接口请求超时":t.includes("Request failed with status code")&&(t="系统接口"+t.substr(t.length-3)+"异常"),Object(n["Message"])({message:t,type:"error",duration:5e3}),Promise.reject(e)}));t["a"]=b},d3d1:function(e,t,a){"use strict";a.d(t,"d",(function(){return s})),a.d(t,"f",(function(){return n})),a.d(t,"g",(function(){return l})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return d})),a.d(t,"e",(function(){return u}));var r=a("b775"),o="/person/employee";function s(e){return Object(r["a"])({url:o+"/list",method:"post",data:e})}function n(e){return Object(r["a"])({url:o+"/save",method:"post",data:e})}function l(e){return Object(r["a"])({url:o+"/update",method:"post",data:e})}function i(e){return Object(r["a"])({url:o+"/deactivate",method:"post",data:{id:e}})}function c(e){return Object(r["a"])({url:o+"/detail",method:"get",params:{uid:e}})}function d(e){return Object(r["a"])({url:o+"/editbtn",method:"get",params:{uid:e}})}function u(e){return Object(r["a"])({url:o+"/resetPwd",method:"post",data:e})}},e2a7:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a("5c96");function o(e,t){switch(t){case"warning":r["Message"].warning(e);break;case"error":r["Message"].error({message:e,duration:5e3,showClose:!0});break;case"info":r["Message"].info(e);break;default:r["Message"].success(e)}}}}]);