"use strict";(self["webpackChunksupermarket_manager"]=self["webpackChunksupermarket_manager"]||[]).push([[122],{3122:function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"dept_list"}},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",[e._v("首页")]),t("el-breadcrumb-item",[e._v("人事管理")]),t("el-breadcrumb-item",[e._v("部门管理")])],1),t("br"),t("el-row",[t("el-col",{attrs:{span:7}},[t("el-input",{attrs:{placeholder:"部门名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),t("el-col",{attrs:{span:7}},[t("el-select",{attrs:{placeholder:"请选择状态",clearable:""},model:{value:e.searchForm.state,callback:function(t){e.$set(e.searchForm,"state",t)},expression:"searchForm.state"}},[t("el-option",{attrs:{label:"正常",value:"0"}}),t("el-option",{attrs:{label:"停用",value:"-1"}})],1)],1)],1),t("br"),t("el-row",[t("el-col",{staticStyle:{"text-align":"left"},attrs:{span:24}},[t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:e.subSearchForm}},[t("i",{staticClass:"iconfont icon-r-find",staticStyle:{"font-size":"18px"}}),e._v(" 搜索 ")]),t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"success"},on:{click:function(t){e.newVisable=!0}}},[t("i",{staticClass:"iconfont icon-r-add",staticStyle:{"font-size":"18px"}}),e._v(" 创建部门 ")])],1)],1),t("br"),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[t("el-table-column",{attrs:{type:"index",label:"序号",width:"180"}}),t("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"}}),t("el-table-column",{attrs:{prop:"info",label:"描述"}}),t("el-table-column",{attrs:{prop:"state",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(n){return["0"==n.row.state?t("el-tag",{staticStyle:{"font-size":"14px"},attrs:{type:"success"}},[t("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"14px"}}),e._v(" 正常 ")]):t("el-tag",{staticStyle:{"font-size":"14px"},attrs:{type:"danger"}},[t("i",{staticClass:"iconfont icon-r-no",staticStyle:{"font-size":"14px"}}),e._v(" 停用 ")])]}}])}),t("el-table-column",{attrs:{label:"操作",width:"240",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"success"},on:{click:function(t){return e.edit(n.row)}}},[t("i",{staticClass:"iconfont icon-r-edit",staticStyle:{"font-size":"18px"}}),e._v(" 修改 ")]),t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"danger"},on:{click:function(t){return e.forbidden(n.row.id)}}},[t("i",{staticClass:"iconfont icon-r-no",staticStyle:{"font-size":"18px"}}),e._v(" 停用 ")])]}}])})],1),t("el-dialog",{attrs:{title:"部门修改",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"100px"},model:{value:e.editForm,callback:function(t){e.editForm=t},expression:"editForm"}},[t("el-form-item",{attrs:{label:"名称："}},[t("el-input",{attrs:{disabled:""},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),t("el-form-item",{attrs:{label:"描述："}},[t("el-input",{attrs:{type:"text"},model:{value:e.editForm.info,callback:function(t){e.$set(e.editForm,"info",t)},expression:"editForm.info"}})],1),t("el-form-item",{attrs:{label:"状态："}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择状态"},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.editForm.state,callback:function(t){e.$set(e.editForm,"state",t)},expression:"editForm.state"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",[t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:e.submitEditForm}},[t("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"18px"}}),e._v(" 提交 ")]),t("el-button",{staticStyle:{"font-size":"18px"},on:{click:e.canCelEdit}},[e._v(" 关闭 ")])],1)],1)],1),t("el-dialog",{attrs:{title:"创建部门",visible:e.newVisable,width:"50%"},on:{"update:visible":function(t){e.newVisable=t}}},[t("el-form",{ref:"newForm",staticClass:"demo-ruleForm",attrs:{model:e.newForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"名称：",prop:"name"}},[t("el-input",{model:{value:e.newForm.name,callback:function(t){e.$set(e.newForm,"name",t)},expression:"newForm.name"}})],1),t("el-form-item",{attrs:{label:"描述："}},[t("el-input",{attrs:{type:"text"},model:{value:e.newForm.info,callback:function(t){e.$set(e.newForm,"info",t)},expression:"newForm.info"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitNewForm("newForm")}}},[e._v("提交")]),t("el-button",{on:{click:function(t){return e.resetNewForm("newForm")}}},[e._v("重置")])],1)],1)],1)],1)},o=[],i=n(4464),a=n(2581),s={data(){return{tableData:[],editForm:{},editRow:{},dialogVisible:!1,newVisable:!1,newForm:{},searchForm:{},options:[{label:"正常",value:"0"},{label:"停用",value:"-1"}],rules:{name:[{required:!0,message:"名称不能为空",trigger:"blur"}]}}},methods:{init(){(0,a.IN)(this.searchForm).then((e=>{200==e.data.code?this.tableData=e.data.data:(0,i.lY)(e.data.msg,"error")}))},forbidden(e){(0,a.LU)(e).then((e=>{e=e.data,200==e.code?(0,i.lY)("操作成功"):(0,i.lY)(e.msg,"error"),this.init()}))},edit(e){this.editForm={...e},this.dialogVisible=!0},subSearchForm(){this.init()},submitEditForm(){(0,a.yo)(this.editForm).then((e=>{e=e.data,200==e.code?((0,i.lY)("操作成功"),this.dialogVisible=!1,this.init()):(0,i.lY)(e.msg,"error")}))},canCelEdit(){this.dialogVisible=!1,this.editForm={}},submitNewForm(e){this.$refs[e].validate((e=>{e&&(console.log(this.newForm),(0,a.UN)(this.newForm).then((e=>{e=e.data,200==e.code?((0,i.lY)("操作成功"),this.newVisable=!1,this.newForm={},this.init()):(0,i.lY)(e.msg,"error")})))}))},resetNewForm(e){this.$refs[e].resetFields()}},created(){this.init()}},l=s,c=n(1656),u=(0,c.A)(l,r,o,!1,null,null,null),d=u.exports},2581:function(e,t,n){n.d(t,{IN:function(){return i},LU:function(){return l},UN:function(){return a},yo:function(){return s}});var r=n(4464);const o="/person/dept";function i(e){return(0,r.hW)(o+"/list",e)}function a(e){return(0,r.PP)(o+"/save",e)}function s(e){return(0,r.PP)(o+"/update",e)}function l(e){return(0,r.PP)(o+"/deactivate",{id:e})}},2399:function(e,t,n){n.d(t,{eF:function(){return a},gf:function(){return i},kD:function(){return s},o7:function(){return l}});var r=n(8987);const o="token";function i(){return r.A.get(o)}function a(){return r.A.remove(o)}function s(){let e=r.A.get("employee");return JSON.parse(e)}function l(e){r.A.remove(e)}},4464:function(e,t,n){n.d(t,{NY:function(){return m},PP:function(){return d},hW:function(){return f},lY:function(){return p}});var r=n(2399),o=n(4335),i=n(1052),a=n(8987),s=n(5373),l=n.n(s);const c="http://sun.ipyingshe.com";function u(){var e=(0,r.gf)();return e&&(0,o.A)({url:c+"/checkedToken",method:"GET",params:{token:e}}).then((e=>{e=e.data,200==e.code&&(a.A.set("token",e.data.token,{expires:1/48}),a.A.set("employee",JSON.stringify(e.data.employee),{expires:1/48}))})).catch((e=>{console.log(e)})),e}function d(e,t){return(0,o.A)({url:c+e,method:"POST",headers:{token:u()},data:l().stringify(t)}).catch((e=>{console.log(e),void 0==e.response||void 0==e.response.data?p(e,"error"):p(e.response.data,"error")}))}function m(e,t){return(0,o.A)({url:c+e,method:"POST",headers:{"Content-Type":"application/json",token:u()},data:t}).catch((e=>{console.log(e),void 0==e.response||void 0==e.response.data?p(e,"error"):p(e.response.data,"error")}))}function f(e,t){return(0,o.A)({url:c+e,method:"GET",headers:{token:u()},params:t}).catch((e=>{console.log(e),void 0==e.response||void 0==e.response.data?p(e,"error"):p(e.response.data,"error")}))}function p(e,t){switch(t){case"warning":i.Message.warning(e);break;case"error":i.Message.error({message:e,duration:5e3,showClose:!0});break;case"info":i.Message.info(e);break;default:i.Message.success(e)}}},8987:function(e,t,n){
/*! js-cookie v3.0.5 | MIT */
function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}n.d(t,{A:function(){return a}});var o={read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function i(e,t){function n(n,o,i){if("undefined"!==typeof document){i=r({},t,i),"number"===typeof i.expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),n=encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in i)i[s]&&(a+="; "+s,!0!==i[s]&&(a+="="+i[s].split(";")[0]));return document.cookie=n+"="+e.write(o,n)+a}}function o(t){if("undefined"!==typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var i=n[o].split("="),a=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(r[s]=e.read(a,s),t===s)break}catch(l){}}return t?r[t]:r}}return Object.create({set:n,get:o,remove:function(e,t){n(e,"",r({},t,{expires:-1}))},withAttributes:function(e){return i(this.converter,r({},this.attributes,e))},withConverter:function(e){return i(r({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var a=i(o,{path:"/"})}}]);
//# sourceMappingURL=122.5271c5c1.js.map