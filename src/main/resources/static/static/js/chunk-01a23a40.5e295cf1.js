(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01a23a40"],{"0bcf":function(e,t,r){},"11c1":function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"d",(function(){return s})),r.d(t,"g",(function(){return i})),r.d(t,"h",(function(){return l})),r.d(t,"a",(function(){return c})),r.d(t,"e",(function(){return u})),r.d(t,"f",(function(){return m})),r.d(t,"c",(function(){return d}));var a=r("b775"),o="/goods/goods";function n(e){return Object(a["a"])({url:o+"/queryPageByQo",method:"post",data:e})}function s(e){return Object(a["a"])({url:o+"/save",method:"post",data:e})}function i(e){return Object(a["a"])({url:o+"/upOrdown",method:"post",data:e})}function l(e){return Object(a["a"])({url:o+"/update",method:"post",data:e})}function c(e){return Object(a["a"])({url:o+"/queryGoodsById",method:"get",params:e})}function u(){return Object(a["a"])({url:o+"/selected_goodsAll",method:"get"})}function m(){return Object(a["a"])({url:o+"/selected_storeAll",method:"get"})}function d(e){return Object(a["a"])({url:o+"/returnGoods",method:"post",data:e})}},"26a2":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=this,r=t.$createElement,a=t._self._c||r;return a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("商品信息")])],1),a("br"),a("el-row",[a("el-col",{staticStyle:{"text-align":"left","padding-right":"10px"},attrs:{span:6}},[a("el-input",{attrs:{placeholder:"商品编号"},model:{value:t.searchForm.id,callback:function(e){t.$set(t.searchForm,"id",e)},expression:"searchForm.id"}})],1),a("el-col",{staticStyle:{"text-align":"left","padding-right":"10px"},attrs:{span:6}},[a("el-input",{attrs:{placeholder:"商品名称"},model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}})],1),a("el-col",{staticStyle:{"text-align":"left","padding-right":"10px"},attrs:{span:6}},[a("el-input",{attrs:{placeholder:"商品售价"},model:{value:t.searchForm.sellPrice,callback:function(e){t.$set(t.searchForm,"sellPrice",e)},expression:"searchForm.sellPrice"}})],1),a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{placeholder:"商品分类",filterable:"",clearable:""},on:{change:function(e){return t.$forceUpdate()}},model:{value:t.searchForm.categoryId,callback:function(e){t.$set(t.searchForm,"categoryId",e)},expression:"searchForm.categoryId"}},t._l(t.options_category,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("br"),a("el-row",[a("el-col",{staticStyle:{"text-align":"left","padding-right":"10px"},attrs:{span:6}},[a("el-select",{attrs:{placeholder:"请选择状态",clearable:""},model:{value:t.searchForm.state,callback:function(e){t.$set(t.searchForm,"state",e)},expression:"searchForm.state"}},t._l(t.options_state,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{attrs:{span:18}},[a("span",[t._v("时间：")]),a("el-date-picker",{attrs:{type:"date",placeholder:"起始时间"},model:{value:t.searchForm.operateStartTime,callback:function(e){t.$set(t.searchForm,"operateStartTime",e)},expression:"searchForm.operateStartTime"}}),t._v(" - "),a("el-date-picker",{attrs:{type:"date",placeholder:"结束时间"},model:{value:t.searchForm.operateEndTime,callback:function(e){t.$set(t.searchForm,"operateEndTime",e)},expression:"searchForm.operateEndTime"}})],1)],1),a("br"),a("el-row",[a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:24}},[a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:t.submitSearchForm}},[a("i",{staticClass:"iconfont icon-r-find",staticStyle:{"font-size":"18px"}}),t._v(" 搜索 ")]),a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"success"},on:{click:function(e){t.newVisable=!0}}},[a("i",{staticClass:"iconfont icon-r-add",staticStyle:{"font-size":"18px"}}),t._v(" 创建商品 ")])],1)],1),a("br"),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,size:"medium"}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),a("el-table-column",{attrs:{prop:"coverUrl",label:"封面"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{attrs:{height:"60px",src:t.BaseApi+e.row.coverUrl}})]}}])}),a("el-table-column",{attrs:{prop:"id",label:"编号"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"sellPrice",label:"售价"}}),a("el-table-column",{attrs:{prop:"purchashPrice",label:"成本价"}}),a("el-table-column",{attrs:{prop:"residueNum",label:"在售数量"}}),a("el-table-column",{attrs:{prop:"categoryName",label:"类型"}}),a("el-table-column",{attrs:{prop:"state",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"==e.row.state?a("el-tag",{attrs:{size:"mini",type:"success"}},[t._v("上架")]):a("el-tag",{attrs:{size:"mini",type:"danger"}},[t._v("下架")])]}}])}),a("el-table-column",{attrs:{prop:"residueStoreNum",label:"库存量"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.residueStoreNum?e.row.residueStoreNum:0)+" ")]}}])}),a("el-table-column",{attrs:{prop:"updateby",label:"操作者"}}),a("el-table-column",{attrs:{prop:"updateTime","show-overflow-tooltip":!0,label:"操作时间"}}),a("el-table-column",{attrs:{prop:"info","show-overflow-tooltip":!0,label:"备注"}}),a("el-table-column",{attrs:{width:"360",fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"success"},on:{click:function(r){return t.editBtn(e.row.id)}}},[a("i",{staticClass:"iconfont icon-r-edit",staticStyle:{"font-size":"18px"}}),t._v(" 修改 ")]),a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"danger"},on:{click:function(r){return t.returnBtn(e.row.id)}}},[a("i",{staticClass:"iconfont icon-r-left",staticStyle:{"font-size":"18px"}}),t._v(" 退还 ")]),"0"==e.row.state?a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"warning"},on:{click:function(r){return t.upOrdown(e.row.id,e.row.state,e.row.residueNum)}}},[a("i",{staticClass:"iconfont icon-r-bottom",staticStyle:{"font-size":"18px"}}),t._v("下架 ")]):t._e(),"1"==e.row.state?a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"warning"},on:{click:function(r){return t.upOrdown(e.row.id,e.row.state)}}},[a("i",{staticClass:"iconfont icon-r-top",staticStyle:{"font-size":"18px"}}),t._v("上架 ")]):t._e()]}}])})],1),a("div",{staticStyle:{margin:"10px 0 15px 0"}},[a("el-pagination",{attrs:{"current-page":t.searchForm.currentPage,"page-sizes":[5,10,20,50],"page-size":t.searchForm.pageSize,layout:"total,sizes, prev, pager, next,jumper",total:t.searchForm.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.searchForm,"currentPage",e)},"update:current-page":function(e){return t.$set(t.searchForm,"currentPage",e)}}})],1)],1),a("el-dialog",{attrs:{title:"创建商品",visible:t.newVisable,width:"50%"},on:{"update:visible":function(e){t.newVisable=e},close:t.dialog_imgClose}},[a("el-form",{ref:"newForm",staticClass:"demo-ruleForm",attrs:{model:t.newForm,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"商品图："}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"{{BaseApi}}/goods/goods/uploadImg","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.BaseApi+t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"商品名：",prop:"name"}},[a("el-input",{attrs:{placeholder:"如：农夫山泉"},model:{value:t.newForm.name,callback:function(e){t.$set(t.newForm,"name",e)},expression:"newForm.name"}})],1),a("el-form-item",{attrs:{label:"成本价：",prop:"purchashPrice"}},[a("el-input",{attrs:{placeholder:"如：9.9"},model:{value:t.newForm.purchashPrice,callback:function(e){t.$set(t.newForm,"purchashPrice",e)},expression:"newForm.purchashPrice"}})],1),a("el-form-item",{attrs:{label:"销售价格："}},[a("el-input",{attrs:{placeholder:"如：9.9"},model:{value:t.newForm.sellPrice,callback:function(e){t.$set(t.newForm,"sellPrice",e)},expression:"newForm.sellPrice"}})],1),a("el-form-item",{attrs:{label:"描述："}},[a("el-input",{attrs:{type:"textarea",placeholder:"如：农夫山泉是矿泉水"},model:{value:t.newForm.info,callback:function(e){t.$set(t.newForm,"info",e)},expression:"newForm.info"}})],1),a("el-form-item",{attrs:{label:"分类："}},[a("el-select",{attrs:{placeholder:"请选择分类",filterable:"",clearable:""},on:{change:function(e){return t.$forceUpdate()}},model:{value:t.newForm.categoryId,callback:function(e){t.$set(t.newForm,"categoryId",e)},expression:"newForm.categoryId"}},t._l(t.options_category,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitNewForm("newForm")}}},[t._v("提交 ")]),a("el-button",{on:{click:function(e){return t.saveCancel("newForm")}}},[t._v("取消")])],1)],1)],1),a("el-dialog",{attrs:{title:"修改商品信息",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.dialog_imgClose}},[a("el-form",{ref:"editForm",staticClass:"demo-ruleForm",attrs:{model:t.editForm,rules:t.rules,"label-width":"100px"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"{{BaseApi}}/goods/goods/uploadImg","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.BaseApi+t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("el-form-item",{attrs:{label:"商品名：",prop:"name"}},[a("el-input",{attrs:{placeholder:"如：农夫山泉"},model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1),a("el-form-item",{attrs:{label:"成本价：",prop:"purchashPrice"}},[a("el-input",{attrs:{placeholder:"如：9.9"},model:{value:t.editForm.purchashPrice,callback:function(e){t.$set(t.editForm,"purchashPrice",e)},expression:"editForm.purchashPrice"}})],1),a("el-form-item",{attrs:{label:"销售价格："}},[a("el-input",{attrs:{placeholder:"如：9.9"},model:{value:t.editForm.sellPrice,callback:function(e){t.$set(t.editForm,"sellPrice",e)},expression:"editForm.sellPrice"}})],1),a("el-form-item",{attrs:{label:"描述："}},[a("el-input",{attrs:{type:"textarea",placeholder:"如：农夫山泉是矿泉水"},model:{value:t.editForm.info,callback:function(e){t.$set(t.editForm,"info",e)},expression:"editForm.info"}})],1),a("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"分类："}},[a("el-select",{attrs:{placeholder:"请选择分类",filterable:"",clearable:""},on:{change:function(e){return t.$forceUpdate()}},model:{value:t.editForm.categoryId,callback:function(e){t.$set(t.editForm,"categoryId",e)},expression:"editForm.categoryId"}},t._l(t.options_category,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitEditForm("editForm")}}},[t._v("提交 ")]),a("el-button",{on:{click:function(e){return t.resetEditForm("editForm")}}},[t._v("关闭 ")])],1)],1)],1),a("el-dialog",{attrs:{title:"退还商品入库信息",visible:t.returnVisible,width:"60%"},on:{"update:visible":function(e){t.returnVisible=e}}},[a("el-form",{ref:"returnForm",staticClass:"demo-ruleForm",attrs:{model:t.returnForm,rules:t.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"商品名："}},[a("el-input",{attrs:{readonly:"",placeholder:"如：农夫山泉"},model:{value:t.returnForm.goodsName,callback:function(e){t.$set(t.returnForm,"goodsName",e)},expression:"returnForm.goodsName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"仓库：",prop:"storeId"}},[a("el-select",{attrs:{placeholder:"请选择仓库",filterable:"",clearable:""},model:{value:t.returnForm.storeId,callback:function(e){t.$set(t.returnForm,"storeId",e)},expression:"returnForm.storeId"}},t._l(t.options_store,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数量：",prop:"goodsNum"}},[a("el-input",{attrs:{type:"number",min:"1",max:t.goodsNum_max,placeholder:"如：1"},on:{change:function(){e.goodsNum_max<e.returnForm.goodsNum&&(e.returnForm.goodsNum=e.goodsNum_max),e.returnForm.goodsNum<1&&(e.returnForm.goodsNum=1)}},model:{value:t.returnForm.goodsNum,callback:function(e){t.$set(t.returnForm,"goodsNum",e)},expression:"returnForm.goodsNum"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"类型：",prop:"state"}},[a("el-select",{attrs:{placeholder:"请选择类型",clearable:""},on:{change:t.$forceUpdate},model:{value:t.returnForm.state,callback:function(e){t.$set(t.returnForm,"state",e)},expression:"returnForm.state"}},[a("el-option",{attrs:{label:"过期",value:"1"}}),a("el-option",{attrs:{label:"入库",value:"0"}})],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"描述："}},[a("el-input",{attrs:{type:"textarea",placeholder:"如：该商品正执行下架操作"},model:{value:t.returnForm.info,callback:function(e){t.$set(t.returnForm,"info",e)},expression:"returnForm.info"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"日期：",prop:"createTime"}},[a("el-date-picker",{attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"退还日期"},model:{value:t.returnForm.createTime,callback:function(e){t.$set(t.returnForm,"createTime",e)},expression:"returnForm.createTime"}})],1)],1)],1),a("el-form-item",{staticStyle:{width:"80%"}},[a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:function(e){return t.submitReturnForm("returnForm")}}},[a("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"18px"}}),t._v(" 确定 ")]),a("el-button",{staticStyle:{"font-size":"18px"},on:{click:function(e){return t.resetReturnForm("returnForm")}}},[t._v("关闭 ")])],1)],1)],1)],1)},o=[],n=(r("b0c0"),r("e2a7")),s=r("11c1"),i=r("3962"),l={data:function(){return{BaseApi:this.$store.state.BaseApi,options_category:[],options_state:[{label:"上架",value:"0"},{label:"下架",value:"1"}],goodsNum_max:"",options_store:[],newVisable:!1,dialogVisible:!1,returnVisible:!1,returnForm:{goodsId:"",goodsNum:"",goodsName:"",createTime:"",info:"",storeId:""},newForm:{},editForm:{id:"",name:"",info:"",categoryId:"",sellPrice:"",purchashPrice:"",state:"",coverUrl:""},imageUrl:"",tableData:[],searchForm:{total:0,currentPage:1,pageSize:5,state:"0"},rules:{name:[{required:!0,message:"商品名不能为空",trigger:"blur"}],purchashPrice:[{required:!0,message:"成本价不能为空",trigger:"blur"}],storeId:[{required:!0,message:"仓库编号不能为空",trigger:"blur"}],createTime:[{required:!0,message:"退还日期不能为空",trigger:"blur"}],state:[{required:!0,message:"退还类型不能为空",trigger:"blur"}],goodsNum:[{required:!0,message:"退还数量不能为空",trigger:"blur"}]}}},methods:{normalCategoryAll:function(){var e=this;Object(i["b"])().then((function(t){200===t.code&&(e.options_category=t.data)}))},normalStoreAll:function(){var e=this;Object(s["f"])().then((function(t){(t.code=200)&&(e.options_store=t.data)}))},dialog_imgClose:function(){this.imageUrl=""},init:function(){var e=this;this.searchForm.operateStartTime>this.searchForm.operateEndTime?Object(n["a"])("结束时间不能小于开始时间","warning"):Object(s["b"])(this.searchForm).then((function(t){200===t.code&&(e.tableData=t.data.records,e.searchForm.total=t.data.total,e.searchForm.pageSize=t.data.size,e.searchForm.currentPage=t.data.current)}))},handleSizeChange:function(e){this.searchForm.pageSize=e,this.init(),console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){this.searchForm.currentPage=e,this.init(),console.log("当前页: ".concat(e))},submitSearchForm:function(){this.init()},saveCancel:function(e){this.newForm={},this.$refs[e].resetFields(),this.newVisable=!1},handleAvatarSuccess:function(e){this.imageUrl=e.url},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,r=e.size/1024/1024<3;return t||this.$message.error("上传头像图片只能是 JPG或PNG 格式!"),r||this.$message.error("上传头像图片大小不能超过 3MB!"),t&&r},submitNewForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.newForm.coverUrl=t.imageUrl,Object(s["d"])(t.newForm).then((function(e){200===e.code&&(Object(n["a"])("操作成功"),t.newForm={},t.imageUrl="",t.newVisable=!1,t.init())})))}))},upOrdown:function(e,t,r){var a=this;"0"==t&&r?Object(n["a"])("请先将该商品从货架上退还给仓库","warning"):this.$confirm("确定要将该商品"+("0"==t?"下架":"上架")+"？","警示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["g"])({gid:e,state:t}).then((function(e){200===e.code&&("0"==t?Object(n["a"])("下架成功"):Object(n["a"])("上架成功"),a.init())}))})).catch((function(){a.$message({type:"info",message:"已取消操作"})}))},resetReturnForm:function(e){this.$refs[e].resetFields(),this.returnVisible=!1,this.returnForm={}},submitEditForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.editForm.coverUrl=t.imageUrl,Object(s["h"])(t.editForm).then((function(e){200===e.code&&(Object(n["a"])("操作成功"),t.editForm={},t.imageUrl="",t.dialogVisible=!1,t.init())})))}))},resetEditForm:function(e){this.$refs[e].resetFields(),this.editForm={},this.dialogVisible=!1},editBtn:function(e){var t=this;Object(s["a"])({id:e}).then((function(e){200===e.code&&(t.editForm={id:e.data.id,name:e.data.name,info:e.data.info,categoryId:e.data.categoryId,sellPrice:e.data.sellPrice,purchashPrice:e.data.purchashPrice,state:e.data.state,coverUrl:e.data.coverUrl},t.imageUrl=t.editForm.coverUrl?t.editForm.coverUrl:"",t.dialogVisible=!0)}))},returnBtn:function(e){var t=this;this.returnForm={goodsId:"",goodsNum:"",goodsName:"",createTime:"",info:"",storeId:""},Object(s["a"])({id:e}).then((function(e){if(200===e.code){if(t.returnForm.goodsId=e.data.id,t.returnForm.goodsName=e.data.name,t.returnForm.goodsNum=e.data.residueNum,0==t.returnForm.goodsNum)return void Object(n["a"])("货架上没有商品","warning");t.goodsNum_max=e.data.residueNum,t.returnVisible=!0}}))},submitReturnForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&Object(s["c"])(t.returnForm).then((function(e){200===e.code&&(Object(n["a"])("退还成功"),t.returnVisible=!1,t.init())}))}))}},mounted:function(){this.init(),this.normalCategoryAll(),this.normalStoreAll()}},c=l,u=(r("a214"),r("2877")),m=Object(u["a"])(c,a,o,!1,null,null,null);t["default"]=m.exports},3962:function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"e",(function(){return s})),r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return l})),r.d(t,"b",(function(){return c}));var a=r("b775"),o="/goods/category";function n(e){return Object(a["a"])({url:o+"/save",method:"post",data:e})}function s(e){return Object(a["a"])({url:o+"/update",method:"post",data:e})}function i(e){return Object(a["a"])({url:o+"/deactivate",method:"post",data:{cid:e}})}function l(e){return Object(a["a"])({url:o+"/queryPageByQo",method:"post",data:e})}function c(){return Object(a["a"])({url:o+"/normalCategoryAll",method:"get"})}},"5f87":function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"d",(function(){return i})),r.d(t,"c",(function(){return l})),r.d(t,"a",(function(){return c}));r("b64b");var a=r("852e"),o=r.n(a),n="token";function s(){return o.a.get(n)}function i(){return o.a.remove(n)}function l(){var e=o.a.get("employee");return JSON.parse(e)}function c(e){o.a.remove(e)}},a214:function(e,t,r){"use strict";r("0bcf")},b775:function(e,t,r){"use strict";r("c7eb"),r("1da1"),r("5530");var a=r("53ca"),o=(r("d9e2"),r("caad"),r("fb6a"),r("e9c4"),r("b64b"),r("d3b7"),r("2532"),r("bc3a")),n=r.n(o),s=r("5c96"),i=r("4360"),l=r("5f87"),c={401:"认证失败，无法访问系统资源",403:"当前操作没有权限",404:"访问资源不存在",default:"系统未知错误，请反馈给管理员"};r("b85c"),r("a15b"),r("14d9"),r("4d63"),r("c607"),r("ac1f"),r("2c3e"),r("00b4"),r("25f0"),r("5319"),r("1276");function u(e){for(var t="",r=0,o=Object.keys(e);r<o.length;r++){var n=o[r],s=e[n],i=encodeURIComponent(n)+"=";if(null!==s&&""!==s&&"undefined"!==typeof s)if("object"===Object(a["a"])(s))for(var l=0,c=Object.keys(s);l<c.length;l++){var u=c[l];if(null!==s[u]&&""!==s[u]&&"undefined"!==typeof s[u]){var m=n+"["+u+"]",d=encodeURIComponent(m)+"=";t+=d+encodeURIComponent(s[u])+"&"}}else t+=i+encodeURIComponent(s)+"&"}return t}var m={set:function(e,t){sessionStorage&&null!=e&&null!=t&&sessionStorage.setItem(e,t)},get:function(e){return sessionStorage?null==e?null:sessionStorage.getItem(e):null},setJSON:function(e,t){null!=t&&this.set(e,JSON.stringify(t))},getJSON:function(e){var t=this.get(e);if(null!=t)return JSON.parse(t)},remove:function(e){sessionStorage.removeItem(e)}},d={set:function(e,t){localStorage&&null!=e&&null!=t&&localStorage.setItem(e,t)},get:function(e){return localStorage?null==e?null:localStorage.getItem(e):null},setJSON:function(e,t){null!=t&&this.set(e,JSON.stringify(t))},getJSON:function(e){var t=this.get(e);if(null!=t)return JSON.parse(t)},remove:function(e){localStorage.removeItem(e)}},p={session:m,local:d},f=(r("21a6"),{show:!1});n.a.defaults.headers["Content-Type"]="application/json;charset=utf-8";var b=n.a.create({baseURL:"/",timeout:1e4});b.interceptors.request.use((function(e){var t=!1===(e.headers||{}).isToken,r=!1===(e.headers||{}).repeatSubmit;if(Object(l["b"])()&&!t&&(e.headers["token"]=Object(l["b"])()),"get"===e.method&&e.params){var o=e.url+"?"+u(e.params);o=o.slice(0,-1),e.params={},e.url=o}if(!r&&("post"===e.method||"put"===e.method)){var n={url:e.url,data:"object"===Object(a["a"])(e.data)?JSON.stringify(e.data):e.data,time:(new Date).getTime()},s=p.session.getJSON("sessionObj");if(void 0===s||null===s||""===s)p.session.setJSON("sessionObj",n);else{var i=s.url,c=s.data,m=s.time,d=1e3;if(c===n.data&&n.time-m<d&&i===n.url){var f="数据正在处理，请勿重复提交";return console.warn("[".concat(i,"]: ")+f),Promise.reject(new Error(f))}p.session.setJSON("sessionObj",n)}}return e}),(function(e){console.log(e),Promise.reject(e)})),b.interceptors.response.use((function(e){var t=e.data.code||200,r=e.data.msg,a=c[t]||c["default"];return"blob"===e.request.responseType||"arraybuffer"===e.request.responseType?e.data:401===t?(f.show||(f.show=!0,s["MessageBox"].confirm("登录状态已过期，您可以继续留在该页面，或者重新登录","系统提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){f.show=!1,i["a"].dispatch("LogOut").then((function(){location.href="/index"}))})).catch((function(){f.show=!1}))),Promise.reject("无效的会话，或者会话已过期，请重新登录。")):500===t?(Object(s["Message"])({message:a,type:"error"}),Promise.reject(new Error(a))):601===t?(Object(s["Message"])({message:a,type:"warning"}),Promise.reject("error")):200!==t?(s["Notification"].error({title:r}),Promise.reject("error")):e.data}),(function(e){console.log("err"+e);var t=e.message;return"Network Error"==t?t="后端接口连接异常":t.includes("timeout")?t="系统接口请求超时":t.includes("Request failed with status code")&&(t="系统接口"+t.substr(t.length-3)+"异常"),Object(s["Message"])({message:t,type:"error",duration:5e3}),Promise.reject(e)}));t["a"]=b},e2a7:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r("5c96");function o(e,t){switch(t){case"warning":a["Message"].warning(e);break;case"error":a["Message"].error({message:e,duration:5e3,showClose:!0});break;case"info":a["Message"].info(e);break;default:a["Message"].success(e)}}}}]);